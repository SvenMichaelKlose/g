0000: 5 0 :              vicreg_interlace_horigin        = $9000
0000: 5 5 :              vicreg_vorigin                  = $9001
0000: 5 10 :             vicreg_screenlo_columns         = $9002
0000: 5 15 :             vicreg_rasterlo_rows_charsize   = $9003
0000: 5 20 :             vicreg_rasterhi                 = $9004
0000: 5 25 :             vicreg_screenhi_charset         = $9005
0000: 5 30 :             vicreg_hpen                     = $9006
0000: 5 35 :             vicreg_vpen                     = $9007
0000: 5 40 :             vicreg_paddle1                  = $9008
0000: 5 45 :             vicreg_paddle2                  = $9009
0000: 5 50 :             vicreg_bass                     = $900a
0000: 5 55 :             vicreg_alto                     = $900b
0000: 5 60 :             vicreg_soprano                  = $900c
0000: 5 65 :             vicreg_noise                    = $900d
0000: 5 70 :             vicreg_auxcol_volume            = $900e
0000: 5 75 :             vicreg_screencol_reverse_border = $900f
0000: 5 80 :             vic_screen_1000      = %11000000
0000: 5 85 :             vic_screen_1200      = %11000000
0000: 5 90 :             vic_screen_1400      = %11010000
0000: 5 95 :             vic_screen_1600      = %11010000
0000: 5 100 :            vic_screen_1800      = %11100000
0000: 5 105 :            vic_screen_1a00      = %11100000
0000: 5 110 :            vic_screen_1c00      = %11110000
0000: 5 115 :            vic_screen_1e00      = %11110000
0000: 5 120 :            charset_upcase          = $8000
0000: 5 125 :            charset_upcase_reversed = $8400
0000: 5 130 :            charset_locase          = $8800
0000: 5 135 :            charset_locase_reversed = $8c00
0000: 5 140 :            vic_charset_upcase   = %0000
0000: 5 145 :            vic_charset_8000     = %0000
0000: 5 150 :            vic_charset_upcase_reversed = %0001
0000: 5 155 :            vic_charset_8400     = %0001
0000: 5 160 :            vic_charset_locase   = %0010
0000: 5 165 :            vic_charset_8800     = %0010
0000: 5 170 :            vic_charset_locase_reversed = %0011
0000: 5 175 :            vic_charset_8c00     = %0011
0000: 5 180 :            vic_charset_1000     = %1100
0000: 5 185 :            vic_charset_1400     = %1101
0000: 5 190 :            vic_charset_1800     = %1110
0000: 5 195 :            vic_charset_1c00_up  = %1111
0000: 5 200 :            vic_charset_1c00     = %1111
0000: 5 205 :            reverse = 8
0000: 5 210 :            multicolor = 8
0000: 5 215 :            black        = 0
0000: 5 220 :            white        = 1
0000: 5 225 :            red          = 2
0000: 5 230 :            cyan         = 3
0000: 5 235 :            purple       = 4
0000: 5 240 :            green        = 5
0000: 5 245 :            blue         = 6
0000: 5 250 :            yellow       = 7
0000: 5 255 :            orange       = 8
0000: 5 260 :            light_orange = 9
0000: 5 265 :            pink         = 10
0000: 5 270 :            light_cyan   = 11
0000: 5 275 :            light_purple = 12
0000: 5 280 :            light_green  = 13
0000: 5 285 :            light_blue   = 14
0000: 5 290 :            light_yellow = 15
0000: 5 295 :            clk_bass_pal    = 4329
0000: 5 300 :            clk_alto_pal    = 8659
0000: 5 305 :            clk_soprano_pal = 17320
0000: 5 310 :            clk_noise_pal   = 34640
0000: 5 315 :            clk_bass_ntsc    = 3995
0000: 5 320 :            clk_alto_ntsc    = 7990
0000: 5 325 :            clk_soprano_ntsc = 15980
0000: 5 330 :            clk_noise_ntsc   = 31960
0000: 5 335 :            joy_fire    = %00100000
0000: 5 340 :            joy_up      = %00000100
0000: 5 345 :            joy_down    = %00001000
0000: 5 350 :            joy_left    = %00010000
0000: 5 355 :            screen_columns  = 20
0000: 5 360 :            screen_rows     = 11
0000: 5 365 :            screen_width    = @(* 8 screen_columns)
0000: 5 370 :            screen_height   = @(* 16 screen_rows)
0000: 5 375 :            screen  = $1e00
0000: 5 380 :            colors  = $9600
0000: 5 385 :            charset = $1000
0000: 5 390 :                data
0000: 5 395 :                org 0
0000: 5 400 :            s:      0 0
0000: 5 405 :            s:      0 0
0000: 5 410 :            s:      0 0
0000: 5 415 :            d:      0 0
0000: 5 420 :            d:      0 0
0000: 5 425 :            d:      0 0
0000: 5 430 :            c:      0 0
0000: 5 435 :            c:      0 0
0000: 5 440 :            c:      0 0
0000: 5 445 :            p:      0
0000: 5 450 :            p:      0
0000: 5 455 :            ph:     0
0000: 5 460 :            ph:     0
0000: 5 465 :            sa:     0 0     ; Bytecode argument list.
0000: 5 470 :            sa:     0 0     ; Bytecode argument list.
0000: 5 475 :            sa:     0 0     ; Bytecode argument list.
0000: 5 480 :            sp:     0 0     ; Bytecode pointer.
0000: 5 485 :            sp:     0 0     ; Bytecode pointer.
0000: 5 490 :            sp:     0 0     ; Bytecode pointer.
0000: 5 495 :            srx:    0       ; Saved X register.
0000: 5 500 :            srx:    0       ; Saved X register.
0000: 5 505 :            tmp:    0
0000: 5 510 :            tmp:    0
0000: 5 515 :            tmp2:   0
0000: 5 520 :            tmp2:   0
0000: 5 525 :            tmp3:   0
0000: 5 530 :            tmp3:   0
0000: 5 535 :            tmp4:   0
0000: 5 540 :            tmp4:   0
0000: 5 545 :            scr:    0 0     ; Current screen address.
0000: 5 550 :            scr:    0 0     ; Current screen address.
0000: 5 555 :            scr:    0 0     ; Current screen address.
0000: 5 560 :            xcpos:  0       ; X columns.
0000: 5 565 :            xcpos:  0       ; X columns.
0000: 5 570 :            font_compression: 0
0000: 5 575 :            font_compression: 0
0000: 5 580 :            context_start:
0000: 5 585 :            rxl:    0
0000: 5 590 :            rxl:    0
0000: 5 595 :            ryt:    0
0000: 5 600 :            ryt:    0
0000: 5 605 :            rxr:    0
0000: 5 610 :            rxr:    0
0000: 5 615 :            ryb:    0
0000: 5 620 :            ryb:    0
0000: 5 625 :            xpos:   0       ; X position
0000: 5 630 :            xpos:   0       ; X position
0000: 5 635 :            ypos:   0       ; Y position
0000: 5 640 :            ypos:   0       ; Y position
0000: 5 645 :            xpos2:  0       ; X position
0000: 5 650 :            xpos2:  0       ; X position
0000: 5 655 :            ypos2:  0       ; Y position
0000: 5 660 :            ypos2:  0       ; Y position
0000: 5 665 :            width:  0       ; Width
0000: 5 670 :            width:  0       ; Width
0000: 5 675 :            height: 0       ; Height
0000: 5 680 :            height: 0       ; Height
0000: 5 685 :            pattern: 0
0000: 5 690 :            pattern: 0
0000: 5 695 :            patternh: 0
0000: 5 700 :            patternh: 0
0000: 5 705 :            font:   0       ; Font starting page.
0000: 5 710 :            font:   0       ; Font starting page.
0000: 5 715 :            font_space_size: 0 ; Width of an empty character.
0000: 5 720 :            font_space_size: 0 ; Width of an empty character.
0000: 5 725 :            do_compress_font_gaps: 0
0000: 5 730 :            do_compress_font_gaps: 0
0000: 5 735 :            masks:  0       ; Source mask.
0000: 5 740 :            masks:  0       ; Source mask.
0000: 5 745 :            maskd:  0       ; Destination mask.
0000: 5 750 :            maskd:  0       ; Destination mask.
0000: 5 755 :            context_end:
0000: 5 760 :            context_size = @(- context_end context_start)
0000: 5 765 :                end
0000: 5 770 :                org @(- (basic-start-address *model*) 2)
0000: 5 775 :            load_address:
0001: 5 780 : 01             @(low (basic-start-address *model*))
0002: 5 785 : 12             @(high (basic-start-address *model*))
0003: 5 790 : 0b             @(unless (first-pass?) (low basic_end))
0004: 5 795 : 12             @(unless (first-pass?) (high basic_end))
0005: 5 800 : 01             $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
0006: 5 805 : 00             $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
0007: 5 810 : 9e             $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
000b: 5 815 : 34 36 32 31    $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
000c: 5 820 : 00             $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
000c: 5 825 :            basic_end:
000d: 5 830 : 00             $00 $00
000e: 5 835 : 00             $00 $00
000e: 5 840 :            main:
120d: 2 845 : a2 05          ldx #@(- cinfo_end cinfo 1)
120d: 2 847 :            l:  lda cinfo,x
120f: 4 849 : bd 3c 12   l:  lda cinfo,x
1212: 4 853 : 95 00          sta s,x
1214: 2 857 : ca             dex
1215: 2 859 : 10 f8          bpl -l
1217: 2 861 : a0 00          ldy #0
1217: 2 863 :            l:  lda (s),y
1219: 5 865 : b1 00      l:  lda (s),y
121b: 5 870 : 91 02          sta (d),y
121d: 5 875 : c6 00          dec s
121f: 3 880 : a5 00          lda s
1221: 2 883 : c9 ff          cmp #$ff
1223: 2 885 : d0 02          bne +n
1225: 5 887 : c6 01          dec @(++ s)
1225: 5 892 :            n:  dec d
1227: 5 897 : c6 02      n:  dec d
1229: 3 902 : a5 02          lda d
122b: 2 905 : c9 ff          cmp #$ff
122d: 2 907 : d0 02          bne +n
122f: 5 909 : c6 03          dec @(++ d)
122f: 5 914 :            n:  dec c
1231: 5 919 : c6 04      n:  dec c
1233: 2 924 : d0 e4          bne -l
1235: 5 926 : c6 05          dec @(++ c)
1237: 2 931 : d0 e0          bne -l
1239: 4 933 : 4c 02 26       jmp boot
1239: 4 937 :            kernal_size         = @(- kernal_end kernal)
1239: 4 941 :            loaded_kernal_end   = @(+ loaded_kernal (-- kernal_size))
1239: 4 945 :            kernal_end2         = @(-- kernal_end)
1239: 4 949 :            cinfo:
1239: 4 953 :            cinfo_kernal:
123a: 4 957 : 1b             <loaded_kernal_end >loaded_kernal_end
123b: 4 961 : 1a             <loaded_kernal_end >loaded_kernal_end
123c: 4 965 : d9             <kernal_end2 >kernal_end2
123d: 4 969 : 27             <kernal_end2 >kernal_end2
123e: 4 973 : da             <kernal_size @(++ >kernal_size)
123f: 4 977 : 08             <kernal_size @(++ >kernal_size)
123f: 4 981 :            cinfo_kernal_end:
123f: 4 985 :            cinfo_end:
123f: 4 989 :            loaded_kernal:
123f: 4 993 :                org $2000
123f: 4 997 :            kernal:
2000: 4 1001 : 4c f5 20  jmp calcscr
2003: 4 1005 : 4c 67 25  jmp setpattern
2006: 4 1009 : 4c 82 21  jmp vline
2009: 4 1013 : 4c e4 21  jmp hline
200c: 4 1017 : 4c 88 22  jmp frame
200f: 4 1021 : 4c ab 22  jmp box
2012: 4 1025 : 4c 15 24  jmp putstring
2015: 4 1029 : 4c 64 23  jmp putchar
2015: 4 1033 : 4c f5 20 4c 67 25 4c 82 21 4c e4 21 4c 88 22 4c ab 22 4c 15 24 4c 64 23    @(syscall-table)
2015: 4 1037 :           c_calcscr=1
2015: 4 1041 :           c_setpattern=2
2015: 4 1045 :           c_vline=3
2015: 4 1049 :           c_hline=4
2015: 4 1053 :           c_frame=5
2015: 4 1057 :           c_box=6
2015: 4 1061 :           c_putstring=7
2015: 4 1065 :           c_putchar=8
2015: 4 1069 :           c_setzb=9
2015: 4 1073 :           c_setzw=10
2015: 4 1077 :           c_setzs=11
2015: 4 1081 :           c_addzb=12
2015: 4 1085 :           c_sbczb=13
2015: 4 1089 :           c_sbczbi=14
2015: 4 1093 :           c_addx=15
2015: 4 1097 :           c_addy=16
2015: 4 1101 :           c_pushz=17
2015: 4 1105 :           c_popz=18
2015: 4 1109 :           c_apply=19
2015: 4 1113 :           @(syscall-bytecodes)
2015: 4 1117 :           syscall_vectors_l:
2016: 4 1121 : f5        <calcscr
2017: 4 1125 : 67        <setpattern
2018: 4 1129 : 82        <vline
2019: 4 1133 : e4        <hline
201a: 4 1137 : 88        <frame
201b: 4 1141 : ab        <box
201c: 4 1145 : 15        <putstring
201d: 4 1149 : 64        <putchar
201e: 4 1153 : 2d        <setzb
201f: 4 1157 : 34        <setzw
2020: 4 1161 : 68        <setzs
2021: 4 1165 : 3f        <addzb
2022: 4 1169 : 4e        <sbczb
2023: 4 1173 : 5d        <sbczbi
2024: 4 1177 : 1d        <addx
2025: 4 1181 : 25        <addy
2026: 4 1185 : 7c        <pushz
2027: 4 1189 : 8c        <popz
2028: 4 1193 : 07        <apply
2028: 4 1197 : f5 67 82 e4 88 ab 15 64 2d 34 68 3f 4e 5d 1d 25 7c 8c 07@(syscall-vectors-l)
2028: 4 1201 :           syscall_vectors_h:
2029: 4 1205 : 20        >calcscr
202a: 4 1209 : 25        >setpattern
202b: 4 1213 : 21        >vline
202c: 4 1217 : 21        >hline
202d: 4 1221 : 22        >frame
202e: 4 1225 : 22        >box
202f: 4 1229 : 24        >putstring
2030: 4 1233 : 23        >putchar
2031: 4 1237 : 25        >setzb
2032: 4 1241 : 25        >setzw
2033: 4 1245 : 25        >setzs
2034: 4 1249 : 25        >addzb
2035: 4 1253 : 25        >sbczb
2036: 4 1257 : 25        >sbczbi
2037: 4 1261 : 25        >addx
2038: 4 1265 : 25        >addy
2039: 4 1269 : 25        >pushz
203a: 4 1273 : 25        >popz
203b: 4 1277 : 25        >apply
203b: 4 1281 : 20 25 21 21 22 22 24 23 25 25 25 25 25 25 25 25 25 25 25@(syscall-vectors-h)
203b: 4 1285 :           syscall_args_l:
203c: 4 1289 : 64        <args_calcscr
203d: 4 1293 : 67        <args_setpattern
203e: 4 1297 : 6a        <args_vline
203f: 4 1301 : 6e        <args_hline
2040: 4 1305 : 72        <args_frame
2041: 4 1309 : 77        <args_box
2042: 4 1313 : 7c        <args_putstring
2043: 4 1317 : 7f        <args_putchar
2044: 4 1321 : 80        <args_setzb
2045: 4 1325 : 83        <args_setzw
2046: 4 1329 : 87        <args_setzs
2047: 4 1333 : 8a        <args_addzb
2048: 4 1337 : 8e        <args_sbczb
2049: 4 1341 : 92        <args_sbczbi
204a: 4 1345 : 95        <args_addx
204b: 4 1349 : 97        <args_addy
204c: 4 1353 : 99        <args_pushz
204d: 4 1357 : 9c        <args_popz
204e: 4 1361 : 9f        <args_apply
204e: 4 1365 : 64 67 6a 6e 72 77 7c 7f 80 83 87 8a 8e 92 95 97 99 9c 9f@(syscall-args-l)
204e: 4 1369 :           syscall_args_h:
204f: 4 1373 : 20        >args_calcscr
2050: 4 1377 : 20        >args_setpattern
2051: 4 1381 : 20        >args_vline
2052: 4 1385 : 20        >args_hline
2053: 4 1389 : 20        >args_frame
2054: 4 1393 : 20        >args_box
2055: 4 1397 : 20        >args_putstring
2056: 4 1401 : 20        >args_putchar
2057: 4 1405 : 20        >args_setzb
2058: 4 1409 : 20        >args_setzw
2059: 4 1413 : 20        >args_setzs
205a: 4 1417 : 20        >args_addzb
205b: 4 1421 : 20        >args_sbczb
205c: 4 1425 : 20        >args_sbczbi
205d: 4 1429 : 20        >args_addx
205e: 4 1433 : 20        >args_addy
205f: 4 1437 : 20        >args_pushz
2060: 4 1441 : 20        >args_popz
2061: 4 1445 : 20        >args_apply
2061: 4 1449 : 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20@(syscall-args-h)
2061: 4 1453 :           args_calcscr:
2062: 4 1457 : 02        2
2063: 4 1461 : 19        xpos
2064: 4 1465 : 1a        ypos
2064: 4 1469 :           args_setpattern:
2065: 4 1473 : 02        2
2066: 4 1477 : 1f        pattern
2067: 4 1481 : 20        patternh
2067: 4 1485 :           args_vline:
2068: 4 1489 : 03        3
2069: 4 1493 : 19        xpos
206a: 4 1497 : 1a        ypos
206b: 4 1501 : 1e        height
206b: 4 1505 :           args_hline:
206c: 4 1509 : 03        3
206d: 4 1513 : 19        xpos
206e: 4 1517 : 1a        ypos
206f: 4 1521 : 1d        width
206f: 4 1525 :           args_frame:
2070: 4 1529 : 04        4
2071: 4 1533 : 19        xpos
2072: 4 1537 : 1a        ypos
2073: 4 1541 : 1d        width
2074: 4 1545 : 1e        height
2074: 4 1549 :           args_box:
2075: 4 1553 : 04        4
2076: 4 1557 : 19        xpos
2077: 4 1561 : 1a        ypos
2078: 4 1565 : 1d        width
2079: 4 1569 : 1e        height
2079: 4 1573 :           args_putstring:
207a: 4 1577 : 02        2
207b: 4 1581 : 06        p
207c: 4 1585 : 07        ph
207c: 4 1589 :           args_putchar:
207d: 4 1593 : 00        0
207d: 4 1597 :           args_setzb:
207e: 4 1601 : 02        2
207f: 4 1605 : 0d        tmp
2080: 4 1609 : 0e        tmp2
2080: 4 1613 :           args_setzw:
2081: 4 1617 : 03        3
2082: 4 1621 : 0d        tmp
2083: 4 1625 : 0e        tmp2
2084: 4 1629 : 0f        tmp3
2084: 4 1633 :           args_setzs:
2085: 4 1637 : 02        2
2086: 4 1641 : 02        d
2087: 4 1645 : 0d        tmp
2087: 4 1649 :           args_addzb:
2088: 4 1653 : 03        3
2089: 4 1657 : 0d        tmp
208a: 4 1661 : 0e        tmp2
208b: 4 1665 : 0f        tmp3
208b: 4 1669 :           args_sbczb:
208c: 4 1673 : 03        3
208d: 4 1677 : 0d        tmp
208e: 4 1681 : 0e        tmp2
208f: 4 1685 : 0f        tmp3
208f: 4 1689 :           args_sbczbi:
2090: 4 1693 : 02        2
2091: 4 1697 : 0d        tmp
2092: 4 1701 : 0e        tmp2
2092: 4 1705 :           args_addx:
2093: 4 1709 : 01        1
2094: 4 1713 : 0d        tmp
2094: 4 1717 :           args_addy:
2095: 4 1721 : 01        1
2096: 4 1725 : 0d        tmp
2096: 4 1729 :           args_pushz:
2097: 4 1733 : 02        2
2098: 4 1737 : 0d        tmp
2099: 4 1741 : 0e        tmp2
2099: 4 1745 :           args_popz:
209a: 4 1749 : 02        2
209b: 4 1753 : 0d        tmp
209c: 4 1757 : 0e        tmp2
209c: 4 1761 :           args_apply:
209d: 4 1765 : 00        0
209d: 4 1769 : 02 19 1a 02 1f 20 03 19 1a 1e 03 19 1a 1d 04 19 1a 1d 1e 04 19 1a 1d 1e 02 06 07 00 02 0d 0e 03 0d 0e 0f 02 02 0d 03 0d 0e 0f 03 0d 0e 0f 02 0d 0e 01 0d 01 0d 02 0d 0e 02 0d 0e 00@(syscall-args)
209d: 4 1773 :           masks_left:
209e: 4 1777 : ff            %11111111
209e: 4 1781 :           maskd_right:
209f: 4 1785 : 7f            %01111111
20a0: 4 1789 : 3f            %00111111
20a1: 4 1793 : 1f            %00011111
20a2: 4 1797 : 0f            %00001111
20a3: 4 1801 : 07            %00000111
20a4: 4 1805 : 03            %00000011
20a5: 4 1809 : 01            %00000001
20a5: 4 1813 :           maskd_left:
20a6: 4 1817 : 00            %00000000
20a6: 4 1821 :           masks_right:
20a7: 4 1825 : 80            %10000000
20a8: 4 1829 : c0            %11000000
20a9: 4 1833 : e0            %11100000
20aa: 4 1837 : f0            %11110000
20ab: 4 1841 : f8            %11111000
20ac: 4 1845 : fc            %11111100
20ad: 4 1849 : fe            %11111110
20ae: 4 1853 : ff            %11111111
20ae: 4 1857 :           pat_empty:
20af: 4 1861 : 00            0 0 0 0 0 0 0 0
20b0: 4 1865 : 00            0 0 0 0 0 0 0 0
20b1: 4 1869 : 00            0 0 0 0 0 0 0 0
20b2: 4 1873 : 00            0 0 0 0 0 0 0 0
20b3: 4 1877 : 00            0 0 0 0 0 0 0 0
20b4: 4 1881 : 00            0 0 0 0 0 0 0 0
20b5: 4 1885 : 00            0 0 0 0 0 0 0 0
20b6: 4 1889 : 00            0 0 0 0 0 0 0 0
20b6: 4 1893 :           pat_solid:
20b7: 4 1897 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20b8: 4 1901 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20b9: 4 1905 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20ba: 4 1909 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20bb: 4 1913 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20bc: 4 1917 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20bd: 4 1921 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20be: 4 1925 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20be: 4 1929 :           pat_background:
20be: 4 1933 :           pat_leaves:
20bf: 4 1937 : c0            %11000000
20c0: 4 1941 : 21            %00100001
20c1: 4 1945 : 12            %00010010
20c2: 4 1949 : 0c            %00001100
20c3: 4 1953 : 30            %00110000
20c4: 4 1957 : 40            %01000000
20c5: 4 1961 : 80            %10000000
20c6: 4 1965 : 80            %10000000
20c7: 4 1969 : c0            %11000000
20c7: 4 1973 :           pat_ovals:
20c8: 4 1977 : 41            %01000001
20c9: 4 1981 : 22            %00100010
20ca: 4 1985 : 9c            %10011100
20cb: 4 1989 : 22            %00100010
20cc: 4 1993 : 41            %01000001
20cd: 4 1997 : 80            %10000000
20ce: 4 2001 : 80            %10000000
20cf: 4 2005 : 80            %10000000
20d0: 4 2009 : 41            %01000001
20d0: 4 2013 :           pat_woven:
20d1: 4 2017 : 1f            %00011111
20d2: 4 2021 : 2e            %00101110
20d3: 4 2025 : 44            %01000100
20d4: 4 2029 : e2            %11100010
20d5: 4 2033 : f1            %11110001
20d6: 4 2037 : e8            %11101000
20d7: 4 2041 : 44            %01000100
20d8: 4 2045 : 8e            %10001110
20d8: 4 2049 :           pat_pits:
20d9: 4 2053 : fb            %11111011
20da: 4 2057 : 00            %00000000
20db: 4 2061 : fb            %11111011
20dc: 4 2065 : fb            %11111011
20dd: 4 2069 : 0a            %00001010
20de: 4 2073 : 0a            %00001010
20df: 4 2077 : 0a            %00001010
20e0: 4 2081 : 0a            %00001010
20e0: 4 2085 :           pat_gray:
20e1: 4 2089 : aa            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e2: 4 2093 : 55            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e3: 4 2097 : aa            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e4: 4 2101 : 55            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e5: 4 2105 : aa            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e6: 4 2109 : 55            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e7: 4 2113 : aa            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e8: 4 2117 : 55            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e9: 4 2121 : aa            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20ea: 4 2125 : 55            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20ea: 4 2129 :           pat_smiley:
20eb: 4 2133 : 3c            %00111100
20ec: 4 2137 : 42            %01000010
20ed: 4 2141 : a5            %10100101
20ee: 4 2145 : a5            %10100101
20ef: 4 2149 : 81            %10000001
20f0: 4 2153 : 5a            %01011010
20f1: 4 2157 : 24            %00100100
20f2: 4 2161 : 18            %00011000
20f2: 4 2165 :           calcscr:
20f5: 3 2169 : a5 19         lda xpos
20f7: 2 2172 : 4a            lsr
20f8: 2 2174 : 4a            lsr
20f9: 2 2176 : 4a            lsr
20fa: 3 2178 : 85 13         sta xcpos
20fc: 2 2181 : aa            tax
20fd: 3 2183 : a5 1a         lda ypos
20ff: 2 2186 : 18            clc
2100: 4 2188 : 7d 0d 21      adc column_addrs_lo,x
2103: 3 2192 : 85 11         sta scr
2105: 4 2195 : bd 21 21      lda column_addrs_hi,x
2108: 2 2199 : 69 00         adc #0
210a: 3 2201 : 85 12         sta @(++ scr)
210c: 6 2204 : 60            rts
210c: 6 2210 :           column_addrs_lo: @(maptimes [low (+ charset (* 16 screen_rows _))] screen_columns)
2120: 6 2216 : 00 b0 60 10 c0 70 20 d0 80 30 e0 90 40 f0 a0 50 00 b0 60 10column_addrs_lo: @(maptimes [low (+ charset (* 16 screen_rows _))] screen_columns)
2120: 6 2222 :           column_addrs_hi: @(maptimes [high (+ charset (* 16 screen_rows _))] screen_columns)
2134: 6 2228 : 10 10 11 12 12 13 14 14 15 16 16 17 18 18 19 1a 1b 1b 1c 1dcolumn_addrs_hi: @(maptimes [high (+ charset (* 16 screen_rows _))] screen_columns)
2134: 6 2234 :           reset_region:
2135: 7 2240 : 00            brk
2136: 7 2247 : 0b            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
2137: 7 2254 : 15            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
2138: 7 2261 : 04            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
2139: 7 2268 : 00            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
213a: 7 2275 : 00            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
213b: 7 2282 : 9f            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
213c: 7 2289 : af            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
213d: 7 2296 : 00            0
213e: 6 2303 : 60            rts
213e: 6 2309 :           clip_x:
213f: 2 2315 : a2 00         ldx #0
213f: 2 2317 :           clip:
2141: 4 2319 : b5 19         lda xpos,x
2143: 2 2323 : 18            clc
2144: 4 2325 : 75 1d         adc width,x
2146: 4 2329 : 95 1b         sta xpos2,x
2148: 4 2333 : b5 19         lda xpos,x
214a: 4 2337 : d5 15         cmp rxl,x
214c: 2 2341 : b0 04         bcs +n
214e: 4 2343 : b5 15         lda rxl,x
2150: 4 2347 : 95 19         sta xpos,x
2150: 4 2351 :           n:
2152: 4 2355 : b5 1b         lda xpos2,x
2154: 4 2359 : d5 17         cmp rxr,x
2156: 2 2363 : 90 04         bcc +n
2158: 4 2365 : b5 17         lda rxr,x
215a: 4 2369 : 95 1b         sta xpos2,x
215a: 4 2373 :           n:
215c: 4 2377 : b5 1b         lda xpos2,x
215e: 2 2381 : 38            sec
215f: 4 2383 : f5 19         sbc xpos,x
2161: 2 2387 : 90 03         bcc +done
2163: 4 2389 : 95 1d         sta width,x
2165: 2 2393 : 38            sec
2165: 2 2395 :           done:
2166: 6 2397 : 60            rts
2166: 6 2403 :           clip_y:
2167: 2 2409 : a2 01         ldx #1
2169: 2 2411 : d0 d6         bne clip    ; (jmp)
2169: 2 2413 :           vmaskd: %01111111
216a: 2 2415 : 7f        vmaskd: %01111111
216b: 2 2417 : bf                %10111111
216c: 2 2419 : df                %11011111
216d: 2 2421 : ef                %11101111
216e: 2 2423 : f7                %11110111
216f: 2 2425 : fb                %11111011
2170: 2 2427 : fd                %11111101
2171: 2 2429 : fe                %11111110
2171: 2 2431 :           vmasks: %10000000
2172: 2 2433 : 80        vmasks: %10000000
2173: 2 2435 : 40                %01000000
2174: 2 2437 : 20                %00100000
2175: 2 2439 : 10                %00010000
2176: 2 2441 : 08                %00001000
2177: 2 2443 : 04                %00000100
2178: 2 2445 : 02                %00000010
2179: 2 2447 : 01                %00000001
2179: 2 2449 :           done:
217b: 4 2451 : 68            pla
217c: 3 2455 : 85 1e         sta height
217e: 4 2458 : 68            pla
217f: 3 2462 : 85 1a         sta ypos
2181: 6 2465 : 60            rts
2181: 6 2471 :           vline:
2182: 3 2477 : a5 1a         lda ypos
2184: 3 2480 : 48            pha
2185: 3 2483 : a5 1e         lda height
2187: 3 2486 : 48            pha
2188: 3 2489 : a5 19         lda xpos
218a: 3 2492 : c5 15         cmp rxl
218c: 2 2495 : 90 ed         bcc -done
218e: 3 2497 : c5 17         cmp rxr
2190: 2 2500 : f0 02         beq +n
2192: 2 2502 : b0 e7         bcs -done
2192: 2 2504 :           n:  jsr clip_y
2194: 6 2506 : 20 67 21  n:  jsr clip_y
2197: 2 2512 : 90 e2         bcc -done
2199: 3 2514 : a5 19         lda xpos
219b: 2 2517 : 29 07         and #7
219d: 2 2519 : aa            tax
219e: 4 2521 : bd 73 21      lda vmasks,x
21a1: 3 2525 : 85 24         sta masks
21a3: 4 2528 : bd 6b 21      lda vmaskd,x
21a6: 3 2532 : 85 25         sta maskd
21a8: 6 2535 : 20 ae 21      jsr vfill
21ab: 4 2541 : 4c 7b 21      jmp -done
21ab: 4 2545 :           vfill:
21ae: 6 2549 : 20 f5 20      jsr calcscr
21b1: 3 2555 : a5 1f         lda pattern
21b3: 4 2558 : 8d c9 21      sta @(+ 1 +mod_pattern)
21b6: 3 2562 : a5 20         lda @(+ 1 pattern)
21b8: 4 2565 : 8d ca 21      sta @(+ 2 +mod_pattern)
21bb: 3 2569 : a4 1e         ldy height
21bd: 2 2572 : 88            dey
21bd: 2 2574 :           l:  tya
21be: 2 2576 : 98        l:  tya
21bf: 2 2578 : 29 07         and #7
21c1: 2 2580 : aa            tax
21c2: 5 2582 : b1 11         lda (scr),y
21c4: 3 2587 : 25 25         and maskd
21c6: 3 2590 : 85 0d         sta tmp
21c6: 3 2593 :           mod_pattern:
21c8: 4 2596 : bd ff ff      lda $ffff,x
21cb: 3 2600 : 25 24         and masks
21cd: 3 2603 : 05 0d         ora tmp
21cf: 5 2606 : 91 11         sta (scr),y
21d1: 2 2611 : 88            dey
21d2: 2 2613 : c0 ff         cpy #255
21d4: 2 2615 : d0 e8         bne -l
21d6: 6 2617 : 60            rts
21d6: 6 2623 :           inc_xcpos:
21d7: 3 2629 : a5 11         lda scr
21d9: 2 2632 : 18            clc
21da: 2 2634 : 69 b0         adc #@(* 16 screen_rows)
21dc: 3 2636 : 85 11         sta scr
21de: 2 2639 : 90 02         bcc +n
21e0: 5 2641 : e6 12         inc @(++ scr)
21e0: 5 2646 :           n:  rts
21e2: 6 2651 : 60        n:  rts
21e2: 6 2657 :           xposr:  0
21e3: 6 2663 : 00        xposr:  0
21e3: 6 2669 :           hline:
21e4: 3 2675 : a5 19         lda xpos
21e6: 3 2678 : 48            pha
21e7: 3 2681 : a5 1d         lda width
21e9: 3 2684 : 48            pha
21ea: 3 2687 : a5 1a         lda ypos
21ec: 3 2690 : c5 16         cmp ryt
21ee: 2 2693 : 90 68         bcc +done
21f0: 3 2695 : c5 18         cmp ryb
21f2: 2 2698 : f0 02         beq +n
21f4: 2 2700 : b0 62         bcs +done
21f4: 2 2702 :           n:  jsr clip_x
21f6: 6 2704 : 20 3f 21  n:  jsr clip_x
21f9: 2 2710 : 90 5d         bcc +done
21fb: 6 2712 : 20 f5 20      jsr calcscr
21fe: 3 2718 : a5 1a         lda ypos
2200: 2 2721 : 29 07         and #7
2202: 2 2723 : a8            tay
2203: 5 2725 : b1 1f         lda (pattern),y
2205: 3 2730 : 85 0e         sta tmp2
2207: 3 2733 : a5 19         lda xpos
2209: 2 2736 : a8            tay
220a: 2 2738 : 18            clc
220b: 3 2740 : 65 1d         adc width
220d: 4 2743 : 8d e3 21      sta xposr
2210: 2 2747 : 4a            lsr
2211: 2 2749 : 4a            lsr
2212: 2 2751 : 4a            lsr
2213: 2 2753 : 38            sec
2214: 3 2755 : e5 13         sbc xcpos
2216: 2 2758 : f0 47         beq single_column
2218: 3 2760 : 85 04         sta c
221a: 2 2763 : 98            tya
221b: 2 2765 : 29 07         and #7
221d: 2 2767 : aa            tax
221e: 2 2769 : a0 00         ldy #0
2220: 5 2771 : b1 11         lda (scr),y
2222: 4 2776 : 3d a8 20      and maskd_left,x
2225: 3 2780 : 85 0d         sta tmp
2227: 3 2783 : a5 0e         lda tmp2
2229: 4 2786 : 3d a0 20      and masks_left,x
222c: 3 2790 : 05 0d         ora tmp
222e: 5 2793 : 91 11         sta (scr),y
2230: 6 2798 : 20 d7 21      jsr inc_xcpos
2233: 5 2804 : c6 04         dec c
2235: 2 2809 : f0 0b         beq +right_end
2235: 2 2811 :           l:  lda tmp2
2237: 3 2813 : a5 0e     l:  lda tmp2
2239: 5 2816 : 91 11         sta (scr),y
223b: 6 2821 : 20 d7 21      jsr inc_xcpos
223e: 5 2827 : c6 04         dec c
2240: 2 2832 : d0 f5         bne -l
2240: 2 2834 :           right_end:
2242: 4 2836 : ad e3 21      lda xposr
2245: 2 2840 : 29 07         and #7
2247: 2 2842 : aa            tax
2248: 5 2844 : b1 11         lda (scr),y
224a: 4 2849 : 3d a1 20      and maskd_right,x
224d: 3 2853 : 85 0d         sta tmp
224f: 3 2856 : a5 0e         lda tmp2
2251: 4 2859 : 3d a9 20      and masks_right,x
2254: 3 2863 : 05 0d         ora tmp
2256: 5 2866 : 91 11         sta (scr),y
2256: 5 2871 :           done:
2258: 4 2876 : 68            pla
2259: 3 2880 : 85 1d         sta width
225b: 4 2883 : 68            pla
225c: 3 2887 : 85 19         sta xpos
225e: 6 2890 : 60            rts
225e: 6 2896 :           single_column:
225f: 2 2902 : 98            tya
2260: 2 2904 : 29 07         and #7
2262: 2 2906 : aa            tax
2263: 4 2908 : ad e3 21      lda xposr
2266: 2 2912 : 29 07         and #7
2268: 2 2914 : a8            tay
2269: 4 2916 : bd a0 20      lda masks_left,x
226c: 4 2920 : 3d a9 20      and masks_right,x
226f: 3 2924 : 85 0f         sta tmp3
2271: 4 2927 : bd a8 20      lda maskd_left,x
2274: 4 2931 : 1d a1 20      ora maskd_right,x
2277: 2 2935 : a0 00         ldy #0
2279: 5 2937 : 31 11         and (scr),y
227b: 3 2942 : 85 0d         sta tmp
227d: 3 2945 : a5 0e         lda tmp2
227f: 3 2948 : 25 0f         and tmp3
2281: 3 2951 : 05 0d         ora tmp
2283: 5 2954 : 91 11         sta (scr),y
2285: 4 2959 : 4c 58 22      jmp -done
2285: 4 2963 :           frame:
2288: 6 2967 : 20 82 21      jsr vline
228b: 6 2973 : 20 e4 21      jsr hline
228e: 3 2979 : a5 19         lda xpos
2290: 3 2982 : 48            pha
2291: 2 2985 : 18            clc
2292: 3 2987 : 65 1d         adc width
2294: 3 2990 : 85 19         sta xpos
2296: 6 2993 : 20 82 21      jsr vline
2299: 4 2999 : 68            pla
229a: 3 3003 : 85 19         sta xpos
229c: 3 3006 : a5 1a         lda ypos
229e: 3 3009 : 48            pha
229f: 2 3012 : 18            clc
22a0: 3 3014 : 65 1e         adc height
22a2: 3 3017 : 85 1a         sta ypos
22a4: 6 3020 : 20 e4 21      jsr hline
22a7: 4 3026 : 68            pla
22a8: 3 3030 : 85 1a         sta ypos
22aa: 6 3033 : 60            rts
22aa: 6 3039 :           box:lda height
22ab: 3 3045 : a5 1e     box:lda height
22ad: 3 3048 : 48            pha
22ae: 3 3051 : a5 1a         lda ypos
22b0: 3 3054 : 48            pha
22b0: 3 3057 :           l:  jsr hline
22b1: 6 3060 : 20 e4 21  l:  jsr hline
22b4: 5 3066 : e6 1a         inc ypos
22b6: 5 3071 : c6 1e         dec height
22b8: 2 3076 : d0 f7         bne -l
22ba: 4 3078 : 68            pla
22bb: 3 3082 : 85 1a         sta ypos
22bd: 4 3085 : 68            pla
22be: 3 3089 : 85 1e         sta height
22c0: 6 3092 : 60            rts
22c0: 6 3098 :           buf_clipped_char:
22c8: 6 3104 : 00 00 00 00 00 00 00 00    fill 8
22c8: 6 3110 :           blit_char:
22c9: 3 3116 : a5 19         lda xpos
22cb: 2 3119 : 29 07         and #7
22cd: 3 3121 : 85 0e         sta tmp2
22cf: 2 3124 : aa            tax
22d0: 4 3126 : bd 0d 24      lda tab_neg,x
22d3: 3 3130 : 85 0f         sta tmp3
22d5: 2 3133 : a0 07         ldy #7
22d5: 2 3135 :           l:  lda (s),y
22d7: 5 3137 : b1 00     l:  lda (s),y
22d9: 3 3142 : a6 0e         ldx tmp2
22db: 2 3145 : f0 04         beq +i
22db: 2 3147 :           m:  lsr
22dd: 2 3149 : 4a        m:  lsr
22de: 2 3151 : ca            dex
22df: 2 3153 : d0 fc         bne -m
22df: 2 3155 :           i:  ora (scr),y
22e1: 5 3157 : 11 11     i:  ora (scr),y
22e3: 5 3162 : 91 11         sta (scr),y
22e5: 2 3167 : 88            dey
22e6: 2 3169 : 10 ef         bpl -l
22e8: 6 3171 : 20 d7 21      jsr inc_xcpos
22eb: 2 3177 : a0 07         ldy #7
22eb: 2 3179 :           l:  lda (s),y
22ed: 5 3181 : b1 00     l:  lda (s),y
22ef: 3 3186 : a6 0f         ldx tmp3
22ef: 3 3189 :           m:  asl
22f1: 2 3192 : 0a        m:  asl
22f2: 2 3194 : ca            dex
22f3: 2 3196 : d0 fc         bne -m
22f5: 5 3198 : 11 11         ora (scr),y
22f7: 5 3203 : 91 11         sta (scr),y
22f9: 2 3208 : 88            dey
22fa: 2 3210 : 10 f1         bpl -l
22fc: 6 3212 : 60            rts
22fc: 6 3218 :           clip_char:
22fd: 2 3224 : a0 07         ldy #7
22fd: 2 3226 :           l:  lda (s),y
22ff: 5 3228 : b1 00     l:  lda (s),y
2301: 4 3233 : 99 c1 22      sta buf_clipped_char,y
2304: 2 3237 : 88            dey
2305: 2 3239 : 10 f8         bpl -l
2307: 2 3241 : a9 c1         lda #<buf_clipped_char
2309: 3 3243 : 85 00         sta s
230b: 2 3246 : a9 22         lda #>buf_clipped_char
230d: 3 3248 : 85 01         sta @(++ s)
230f: 3 3251 : a5 16         lda ryt
2311: 2 3254 : 38            sec
2312: 3 3256 : e5 1a         sbc ypos
2314: 2 3259 : 90 0a         bcc +n
2316: 2 3261 : a8            tay
2317: 2 3263 : 88            dey
2318: 2 3265 : a9 00         lda #0
2318: 2 3267 :           l:  sta buf_clipped_char,y
231a: 4 3269 : 99 c1 22  l:  sta buf_clipped_char,y
231d: 2 3273 : 88            dey
231e: 2 3275 : 10 fa         bpl -l
231e: 2 3277 :           n:
2320: 3 3279 : a5 1c         lda ypos2
2322: 3 3282 : c5 18         cmp ryb
2324: 2 3285 : 90 10         bcc +n
2326: 3 3287 : a5 18         lda ryb
2328: 2 3290 : 38            sec
2329: 3 3292 : e5 1a         sbc ypos
232b: 2 3295 : a8            tay
232c: 2 3297 : a9 00         lda #0
232c: 2 3299 :           l:  sta buf_clipped_char,y
232e: 4 3301 : 99 c1 22  l:  sta buf_clipped_char,y
2331: 2 3305 : c8            iny
2332: 2 3307 : c0 08         cpy #8
2334: 2 3309 : d0 f8         bne -l
2334: 2 3311 :           n:
2336: 2 3313 : a9 ff         lda #$ff
2338: 3 3315 : 85 0e         sta tmp2
233a: 3 3318 : a5 15         lda rxl
233c: 2 3321 : 38            sec
233d: 3 3323 : e5 19         sbc xpos
233f: 2 3326 : 90 06         bcc +n
2341: 2 3328 : a8            tay
2342: 4 3330 : b9 a0 20      lda masks_left,y
2345: 3 3334 : 85 0e         sta tmp2
2345: 3 3337 :           n:
2347: 3 3340 : a5 1b         lda xpos2
2349: 2 3343 : 38            sec
234a: 3 3345 : e5 17         sbc rxr
234c: 2 3348 : 90 08         bcc +n
234e: 2 3350 : a8            tay
234f: 4 3352 : b9 a9 20      lda masks_right,y
2352: 3 3356 : 25 0e         and tmp2
2354: 3 3359 : 85 0e         sta tmp2
2354: 3 3362 :           n:
2356: 2 3365 : a0 07         ldy #7
2356: 2 3367 :           l:  lda tmp2
2358: 3 3369 : a5 0e     l:  lda tmp2
235a: 4 3372 : 39 c1 22      and buf_clipped_char,y
235d: 4 3376 : 99 c1 22      sta buf_clipped_char,y
2360: 2 3380 : 88            dey
2361: 2 3382 : 10 f5         bpl -l
2363: 6 3384 : 60            rts
2363: 6 3390 :           putchar:
2364: 2 3396 : c9 5b         cmp #@(++ (char-code #\Z)))
2366: 2 3398 : 90 03         bcc +n
2368: 2 3400 : 38            sec
2369: 2 3402 : e9 60         sbc #@(-- (char-code #\a))
2369: 2 3404 :           n:
236b: 2 3406 : 0a            asl
236c: 2 3408 : 69 00         adc #0
236e: 2 3410 : 0a            asl
236f: 2 3412 : 69 00         adc #0
2371: 2 3414 : 0a            asl
2372: 2 3416 : 69 00         adc #0
2374: 2 3418 : a8            tay
2375: 2 3420 : 29 f8         and #%11111000
2377: 3 3422 : 85 00         sta s
2379: 2 3425 : 98            tya
237a: 2 3427 : 29 07         and #%00000111
237c: 3 3429 : 05 21         ora font
237e: 3 3432 : 85 01         sta @(++ s)
2380: 2 3435 : a0 07         ldy #7
2382: 2 3437 : a9 00         lda #0
2382: 2 3439 :           l:  ora (s),y
2384: 5 3441 : 11 00     l:  ora (s),y
2386: 2 3446 : 88            dey
2387: 2 3448 : 10 fb         bpl -l
2389: 3 3450 : 85 0d         sta tmp
238b: 3 3453 : a6 19         ldx xpos    ; XXX really needed?
238d: 2 3456 : f0 0e         beq +n
238f: 3 3458 : a6 23         ldx do_compress_font_gaps
2391: 2 3461 : f0 0a         beq +n
2391: 2 3463 :           l:  asl
2393: 2 3465 : 0a        l:  asl
2394: 2 3467 : b0 07         bcs +n
2396: 2 3469 : f0 05         beq +n
2398: 5 3471 : c6 19         dec xpos
239a: 4 3476 : 4c 93 23      jmp -l
239a: 4 3480 :           n:
239d: 3 3484 : a5 19         lda xpos
239f: 2 3487 : 18            clc
23a0: 2 3489 : 69 08         adc #8
23a2: 3 3491 : 85 1b         sta xpos2
23a4: 3 3494 : a5 1a         lda ypos
23a6: 2 3497 : 18            clc
23a7: 2 3499 : 69 08         adc #8
23a9: 3 3501 : 85 1c         sta ypos2
23ab: 3 3504 : a5 19         lda xpos
23ad: 3 3507 : c5 17         cmp rxr
23af: 2 3510 : b0 33         bcs +next_char
23b1: 3 3512 : a5 1b         lda xpos2
23b3: 3 3515 : c5 15         cmp rxl
23b5: 2 3518 : 90 2d         bcc +next_char
23b7: 3 3520 : a5 1a         lda ypos
23b9: 3 3523 : c5 18         cmp ryb
23bb: 2 3526 : b0 27         bcs +next_char
23bd: 3 3528 : a5 1c         lda ypos2
23bf: 3 3531 : c5 16         cmp ryt
23c1: 2 3534 : 90 21         bcc +next_char
23c3: 3 3536 : a5 19         lda xpos
23c5: 3 3539 : c5 15         cmp rxl
23c7: 2 3542 : 90 12         bcc +m
23c9: 3 3544 : a5 17         lda rxr
23cb: 3 3547 : c5 1b         cmp xpos2
23cd: 2 3550 : 90 0c         bcc +m
23cf: 3 3552 : a5 1a         lda ypos
23d1: 3 3555 : c5 16         cmp ryt
23d3: 2 3558 : 90 06         bcc +m
23d5: 3 3560 : a5 18         lda ryb
23d7: 3 3563 : c5 1c         cmp ypos2
23d9: 2 3566 : b0 03         bcs +n
23d9: 2 3568 :           m:  jsr clip_char
23db: 6 3570 : 20 fd 22  m:  jsr clip_char
23db: 6 3576 :           n:
23de: 6 3582 : 20 f5 20      jsr calcscr
23e1: 6 3588 : 20 c9 22      jsr blit_char
23e1: 6 3594 :           next_char:
23e4: 3 3600 : a5 19         lda xpos
23e6: 2 3603 : 18            clc
23e7: 2 3605 : 69 08         adc #8
23e9: 3 3607 : 85 19         sta xpos
23eb: 3 3610 : a6 23         ldx do_compress_font_gaps
23ed: 2 3613 : f0 1d         beq +j
23ef: 3 3615 : a5 0d         lda tmp
23f1: 2 3618 : f0 0f         beq +n      ; Add default gap for spaces…
23f3: 3 3620 : a5 0d         lda tmp
23f3: 3 3623 :           l:  lsr
23f5: 2 3626 : 4a        l:  lsr
23f6: 2 3628 : b0 07         bcs +done
23f8: 2 3630 : f0 05         beq +done
23fa: 5 3632 : c6 19         dec xpos
23fc: 4 3637 : 4c f5 23      jmp -l
23fc: 4 3641 :           done:
23ff: 5 3645 : e6 19         inc xpos
2401: 6 3650 : 60            rts
2401: 6 3656 :           n:  lda xpos
2402: 3 3662 : a5 19     n:  lda xpos
2404: 2 3665 : 38            sec
2405: 2 3667 : e9 08         sbc #8
2407: 2 3669 : 18            clc
2408: 3 3671 : 65 22         adc font_space_size
240a: 3 3674 : 85 19         sta xpos
240a: 3 3677 :           j:  rts
240c: 6 3680 : 60        j:  rts
240c: 6 3686 :           tab_neg:    0 7 6 5 4 3 2 1
240d: 6 3692 : 00        tab_neg:    0 7 6 5 4 3 2 1
240e: 6 3698 : 07        tab_neg:    0 7 6 5 4 3 2 1
240f: 6 3704 : 06        tab_neg:    0 7 6 5 4 3 2 1
2410: 6 3710 : 05        tab_neg:    0 7 6 5 4 3 2 1
2411: 6 3716 : 04        tab_neg:    0 7 6 5 4 3 2 1
2412: 6 3722 : 03        tab_neg:    0 7 6 5 4 3 2 1
2413: 6 3728 : 02        tab_neg:    0 7 6 5 4 3 2 1
2414: 6 3734 : 01        tab_neg:    0 7 6 5 4 3 2 1
2414: 6 3740 :           putstring:
2415: 2 3746 : a0 00         ldy #0
2417: 5 3748 : b1 06         lda (p),y
2419: 2 3753 : f0 0c         beq +done
241b: 6 3755 : 20 64 23      jsr putchar
241e: 5 3761 : e6 06         inc p
2420: 2 3766 : d0 f3         bne putstring
2422: 5 3768 : e6 07         inc @(++ p)
2424: 4 3773 : 4c 15 24      jmp putstring
2424: 4 3777 :           done:
2427: 5 3781 : e6 06         inc p
2429: 2 3786 : d0 02         bne +n
242b: 5 3788 : e6 07         inc @(++ p)
242b: 5 3793 :           n:  rts
242d: 6 3798 : 60        n:  rts
242d: 6 3804 :           gfx_init:
242e: 2 3810 : a9 00         lda #0
2430: 2 3812 : aa            tax
2430: 2 3814 :           l:  sta colors,x
2431: 4 3816 : 9d 00 96  l:  sta colors,x
2434: 4 3820 : 9d 00 97      sta @(+ 256 colors),x
2437: 2 3824 : ca            dex
2438: 2 3826 : d0 f7         bne -l
243a: 2 3828 : a9 00         lda #<screen
243c: 3 3830 : 85 02         sta d
243e: 2 3833 : a9 1e         lda #>screen
2440: 3 3835 : 85 03         sta @(++ d)
2442: 2 3838 : a2 0b         ldx #11
2444: 2 3840 : a9 d1         lda #@(* (-- screen_columns) screen_rows)
2444: 2 3842 :           m:  pha
2446: 3 3844 : 48        m:  pha
2447: 2 3847 : a0 13         ldy #@(-- screen_columns)
2447: 2 3849 :           l:  sta (d),y
2449: 5 3851 : 91 02     l:  sta (d),y
244b: 2 3856 : 38            sec
244c: 2 3858 : e9 0b         sbc #screen_rows
244e: 2 3860 : 88            dey
244f: 2 3862 : 10 f8         bpl -l
2451: 3 3864 : a5 02         lda d
2453: 2 3867 : 18            clc
2454: 2 3869 : 69 14         adc #screen_columns
2456: 3 3871 : 85 02         sta d
2458: 2 3874 : 90 02         bcc +n
245a: 5 3876 : e6 03         inc @(++ d)
245a: 5 3881 :           n:  pla
245c: 4 3886 : 68        n:  pla
245d: 2 3890 : 18            clc
245e: 2 3892 : 69 01         adc #1
2460: 2 3894 : ca            dex
2461: 2 3896 : d0 e3         bne -m
2463: 4 3898 : ad e4 ed      lda $ede4
2466: 2 3902 : 18            clc
2467: 2 3904 : 69 02         adc #2
2469: 4 3906 : 8d 00 90      sta $9000
246c: 4 3910 : ad e5 ed      lda $ede5
246f: 2 3914 : 69 02         adc #2
2471: 4 3916 : 8d 01 90      sta $9001
2474: 2 3920 : a9 94         lda #@(+ 128 screen_columns)
2476: 4 3922 : 8d 02 90      sta $9002
2479: 2 3926 : a9 17         lda #@(+ (* 2 screen_rows) 1)
247b: 4 3928 : 8d 03 90      sta $9003
247e: 2 3932 : a9 fc         lda #$fc    ; screen=$1e00, chars=$1000
2480: 4 3934 : 8d 05 90      sta $9005
2483: 2 3938 : a9 1b         lda #@(+ (* white 16) reverse cyan)
2485: 4 3940 : 8d 0f 90      sta $900f
2488: 6 3944 : 20 35 21      jsr reset_region
248b: 7 3950 : 00            brk
248c: 7 3957 : 09            c_setzb font $88
248d: 7 3964 : 21            c_setzb font $88
248e: 7 3971 : 88            c_setzb font $88
248f: 7 3978 : 09            c_setzb do_compress_font_gaps 1
2490: 7 3985 : 23            c_setzb do_compress_font_gaps 1
2491: 7 3992 : 01            c_setzb do_compress_font_gaps 1
2492: 7 3999 : 09            c_setzb font_compression 2
2493: 7 4006 : 14            c_setzb font_compression 2
2494: 7 4013 : 02            c_setzb font_compression 2
2495: 7 4020 : 09            c_setzb font_space_size 3
2496: 7 4027 : 22            c_setzb font_space_size 3
2497: 7 4034 : 03            c_setzb font_space_size 3
2498: 7 4041 : 00            0
2499: 6 4048 : 60            rts
2499: 6 4054 :           num_args:   0
249a: 6 4060 : 00        num_args:   0
249a: 6 4066 :           inc_sp:
249b: 5 4072 : e6 0a         inc sp
249d: 2 4077 : d0 02         bne +n
249f: 5 4079 : e6 0b         inc @(++ sp)
249f: 5 4084 :           n:  rts
24a1: 6 4089 : 60        n:  rts
24a1: 6 4095 :           inc_sa:
24a2: 5 4101 : e6 08         inc sa
24a4: 2 4106 : d0 02         bne +n
24a6: 5 4108 : e6 09         inc @(++ sa)
24a6: 5 4113 :           n:  rts
24a8: 6 4118 : 60        n:  rts
24a8: 6 4124 :           exec_script:
24a9: 4 4130 : 68            pla ; Y
24aa: 4 4134 : 68            pla ; X
24ab: 3 4138 : 85 0c         sta srx
24ad: 4 4141 : 68            pla ; A
24ae: 4 4145 : 28            plp ; flags
24af: 4 4149 : 68            pla
24b0: 3 4153 : 85 0a         sta sp
24b2: 4 4156 : 68            pla
24b3: 3 4160 : 85 0b         sta @(++ sp)
24b5: 3 4163 : a5 0a         lda sp
24b7: 2 4166 : 38            sec
24b8: 2 4168 : e9 01         sbc #1
24ba: 3 4170 : 85 0a         sta sp
24bc: 2 4173 : b0 02         bcs +n
24be: 5 4175 : c6 0b         dec @(++ sp)
24be: 5 4180 :           n:
24be: 5 4185 :           next_bytecode:
24c0: 2 4190 : a0 00         ldy #0
24c2: 5 4192 : b1 0a         lda (sp),y
24c4: 2 4197 : f0 38         beq +done   ; Return to native code…
24c6: 2 4199 : aa            tax
24c7: 2 4201 : ca            dex
24c8: 4 4203 : bd 18 20      lda syscall_vectors_l,x
24cb: 4 4207 : 8d f9 24      sta @(+ 1 +mod_call)
24ce: 4 4211 : bd 2b 20      lda syscall_vectors_h,x
24d1: 4 4215 : 8d fa 24      sta @(+ 2 +mod_call)
24d4: 4 4219 : bd 3e 20      lda syscall_args_l,x
24d7: 3 4223 : 85 08         sta sa
24d9: 4 4226 : bd 51 20      lda syscall_args_h,x
24dc: 3 4230 : 85 09         sta @(++ sa)
24de: 5 4233 : b1 08         lda (sa),y
24e0: 4 4238 : 8d 9a 24      sta num_args
24e0: 4 4242 :           next_arg:
24e3: 6 4246 : 20 9b 24      jsr inc_sp
24e6: 6 4252 : ce 9a 24      dec num_args
24e9: 2 4258 : 30 0d         bmi script_call
24eb: 6 4260 : 20 a2 24      jsr inc_sa
24ee: 5 4266 : b1 08         lda (sa),y      ; Get zero page address from argument info.
24f0: 2 4271 : aa            tax
24f1: 5 4273 : b1 0a         lda (sp),y      ; Copy in argument value.
24f3: 4 4278 : 95 00         sta 0,x
24f5: 4 4282 : 4c e3 24      jmp next_arg
24f5: 4 4286 :           script_call:
24f5: 4 4290 :           mod_call:
24f8: 6 4294 : 20 ff ff      jsr $ffff
24fb: 4 4300 : 4c c0 24      jmp next_bytecode
24fb: 4 4304 :           done:
24fe: 3 4308 : a5 0b         lda @(++ sp)
2500: 3 4311 : 48            pha
2501: 3 4314 : a5 0a         lda sp
2503: 3 4317 : 48            pha
2504: 3 4320 : a6 0c         ldx srx
2506: 6 4323 : 60            rts
2506: 6 4329 :           apply:
2507: 5 4335 : b1 0a         lda (sp),y
2509: 2 4340 : aa            tax
250a: 2 4342 : ca            dex
250b: 6 4344 : 20 9b 24      jsr inc_sp
250e: 4 4350 : bd 18 20      lda syscall_vectors_l,x
2511: 4 4354 : 8d 1b 25      sta @(+ 1 +mod_call)
2514: 4 4358 : bd 2b 20      lda syscall_vectors_h,x
2517: 4 4362 : 8d 1c 25      sta @(+ 2 +mod_call)
2517: 4 4366 :           mod_call:
251a: 4 4370 : 4c ff ff      jmp $ffff
251a: 4 4374 :           addx:
251d: 3 4378 : a5 0d         lda tmp
251f: 2 4381 : 18            clc
2520: 3 4383 : 65 19         adc xpos
2522: 3 4386 : 85 19         sta xpos
2524: 6 4389 : 60            rts
2524: 6 4395 :           addy:
2525: 3 4401 : a5 0d         lda tmp
2527: 2 4404 : 18            clc
2528: 3 4406 : 65 1a         adc ypos
252a: 3 4409 : 85 1a         sta ypos
252c: 6 4412 : 60            rts
252c: 6 4418 :           setzb:
252d: 3 4424 : a6 0d         ldx tmp
252f: 3 4427 : a5 0e         lda tmp2
2531: 4 4430 : 95 00         sta 0,x
2533: 6 4434 : 60            rts
2533: 6 4440 :           setzw:
2534: 3 4446 : a6 0d         ldx tmp
2536: 3 4449 : a5 0e         lda tmp2
2538: 4 4452 : 95 00         sta 0,x
253a: 3 4456 : a5 0f         lda tmp3
253c: 4 4459 : 95 01         sta 1,x
253e: 6 4463 : 60            rts
253e: 6 4469 :           addzb:
253f: 3 4475 : a6 0e         ldx tmp2
2541: 3 4478 : a4 0f         ldy tmp3
2543: 4 4481 : b5 00         lda 0,x
2545: 2 4485 : 18            clc
2546: 4 4487 : 79 00 00      adc 0,y
2549: 3 4491 : a6 0d         ldx tmp
254b: 4 4494 : 95 00         sta 0,x
254d: 6 4498 : 60            rts
254d: 6 4504 :           sbczb:
254e: 3 4510 : a6 0e         ldx tmp2
2550: 3 4513 : a4 0f         ldy tmp3
2552: 4 4516 : b5 00         lda 0,x
2554: 2 4520 : 38            sec
2555: 4 4522 : f9 00 00      sbc 0,y
2558: 3 4526 : a6 0d         ldx tmp
255a: 4 4529 : 95 00         sta 0,x
255c: 6 4533 : 60            rts
255c: 6 4539 :           sbczbi:
255d: 3 4545 : a6 0d         ldx tmp
255f: 4 4548 : b5 00         lda 0,x
2561: 2 4552 : 38            sec
2562: 3 4554 : e5 0e         sbc tmp2
2564: 4 4557 : 95 00         sta 0,x
2566: 6 4561 : 60            rts
2566: 6 4567 :           setpattern:
2567: 6 4573 : 60            rts
2567: 6 4579 :           setzs:
2568: 3 4585 : 84 03         sty @(++ d)
2568: 3 4588 :           l:  lda (sp),y
256a: 5 4591 : b1 0a     l:  lda (sp),y
256c: 5 4596 : 91 02         sta (d),y
256e: 6 4601 : 20 9b 24      jsr inc_sp
2571: 5 4607 : e6 02         inc d
2573: 2 4612 : d0 02         bne +n
2575: 5 4614 : e6 03         inc @(++ d)
2575: 5 4619 :           n:  dec tmp
2577: 5 4624 : c6 0d     n:  dec tmp
2579: 2 4629 : d0 ef         bne -l
257b: 6 4631 : 60            rts
257b: 6 4637 :           pushz:
257c: 4 4643 : 68            pla
257d: 4 4647 : 68            pla
257e: 3 4651 : a6 0d         ldx tmp
2580: 3 4654 : a4 0e         ldy tmp2
2580: 3 4657 :           l:  lda 0,x
2582: 4 4660 : b5 00     l:  lda 0,x
2584: 2 4664 : e8            inx
2585: 3 4666 : 48            pha
2586: 2 4669 : 88            dey
2587: 2 4671 : d0 f9         bne -l
2589: 4 4673 : 4c c0 24      jmp next_bytecode
2589: 4 4677 :           popz:
258c: 4 4681 : 68            pla
258d: 4 4685 : 68            pla
258e: 3 4689 : a4 0e         ldy tmp2
2590: 2 4692 : 98            tya
2591: 2 4694 : 18            clc
2592: 3 4696 : 65 0d         adc tmp
2594: 2 4699 : aa            tax
2594: 2 4701 :           l:  pla
2595: 4 4703 : 68        l:  pla
2596: 2 4707 : ca            dex
2597: 4 4709 : 95 00         sta 0,x
2599: 2 4713 : 88            dey
259a: 2 4715 : d0 f9         bne -l
259c: 4 4717 : 4c c0 24      jmp next_bytecode
259c: 4 4721 :           window:
259f: 7 4725 : 00            brk
25a0: 7 4732 : 02            c_setpattern <pat_empty >pat_empty
25a1: 7 4739 : b1            c_setpattern <pat_empty >pat_empty
25a2: 7 4746 : 20            c_setpattern <pat_empty >pat_empty
25a3: 7 4753 : 13            c_apply c_box
25a4: 7 4760 : 06            c_apply c_box
25a5: 7 4767 : 02            c_setpattern <pat_solid >pat_solid
25a6: 7 4774 : b9            c_setpattern <pat_solid >pat_solid
25a7: 7 4781 : 20            c_setpattern <pat_solid >pat_solid
25a8: 7 4788 : 13            c_apply c_frame
25a9: 7 4795 : 05            c_apply c_frame
25aa: 7 4802 : 10            c_addy 10
25ab: 7 4809 : 0a            c_addy 10
25ac: 7 4816 : 13            c_apply c_hline
25ad: 7 4823 : 04            c_apply c_hline
25ae: 7 4830 : 10            c_addy @(- 256 10)
25af: 7 4837 : f6            c_addy @(- 256 10)
25b0: 7 4844 : 00            0
25b1: 7 4851 : 00            brk
25b2: 7 4858 : 11            c_pushz xpos context_size
25b3: 7 4865 : 19            c_pushz xpos context_size
25b4: 7 4872 : 11            c_pushz xpos context_size
25b5: 7 4879 : 0c            c_addzb tmp4 xpos width
25b6: 7 4886 : 10            c_addzb tmp4 xpos width
25b7: 7 4893 : 19            c_addzb tmp4 xpos width
25b8: 7 4900 : 1d            c_addzb tmp4 xpos width
25b9: 7 4907 : 00            0
25ba: 3 4914 : a5 10         lda tmp4
25bc: 3 4917 : 48            pha
25bd: 7 4920 : 00            brk
25be: 7 4927 : 0f            c_addx 2
25bf: 7 4934 : 02            c_addx 2
25c0: 7 4941 : 10            c_addy 2
25c1: 7 4948 : 02            c_addy 2
25c2: 7 4955 : 0a            c_setzw p <txt_clock >txt_clock
25c3: 7 4962 : 06            c_setzw p <txt_clock >txt_clock
25c4: 7 4969 : f9            c_setzw p <txt_clock >txt_clock
25c5: 7 4976 : 25            c_setzw p <txt_clock >txt_clock
25c6: 7 4983 : 13            c_apply c_putstring
25c7: 7 4990 : 07            c_apply c_putstring
25c8: 7 4997 : 00            0
25c9: 4 5004 : 68            pla
25ca: 3 5008 : 85 10         sta tmp4
25cc: 7 5011 : 00            brk
25cd: 7 5018 : 0d            c_sbczb width tmp4 xpos
25ce: 7 5025 : 1d            c_sbczb width tmp4 xpos
25cf: 7 5032 : 10            c_sbczb width tmp4 xpos
25d0: 7 5039 : 19            c_sbczb width tmp4 xpos
25d1: 7 5046 : 0e            c_sbczbi width 2
25d2: 7 5053 : 1d            c_sbczbi width 2
25d3: 7 5060 : 02            c_sbczbi width 2
25d4: 7 5067 : 10            c_addy 1
25d5: 7 5074 : 01            c_addy 1
25d6: 7 5081 : 13            c_apply c_hline
25d7: 7 5088 : 04            c_apply c_hline
25d8: 7 5095 : 00            0
25d9: 2 5102 : a2 02         ldx #2
25d9: 2 5104 :           l:  brk
25db: 7 5106 : 00        l:  brk
25dc: 7 5113 : 10            c_addy 2
25dd: 7 5120 : 02            c_addy 2
25de: 7 5127 : 13            c_apply c_hline
25df: 7 5134 : 04            c_apply c_hline
25e0: 7 5141 : 00            0
25e1: 2 5148 : ca            dex
25e2: 2 5150 : d0 f7         bne -l
25e4: 7 5152 : 00            brk
25e5: 7 5159 : 12            c_popz xpos context_size
25e6: 7 5166 : 19            c_popz xpos context_size
25e7: 7 5173 : 11            c_popz xpos context_size
25e8: 7 5180 : 0e            c_sbczbi width 2
25e9: 7 5187 : 1d            c_sbczbi width 2
25ea: 7 5194 : 02            c_sbczbi width 2
25eb: 7 5201 : 0e            c_sbczbi height 11
25ec: 7 5208 : 1e            c_sbczbi height 11
25ed: 7 5215 : 0b            c_sbczbi height 11
25ee: 7 5222 : 10            c_addy 11
25ef: 7 5229 : 0b            c_addy 11
25f0: 7 5236 : 0f            c_addx 1
25f1: 7 5243 : 01            c_addx 1
25f2: 7 5250 : 02            c_setpattern <pat_woven >pat_woven
25f3: 7 5257 : d3            c_setpattern <pat_woven >pat_woven
25f4: 7 5264 : 20            c_setpattern <pat_woven >pat_woven
25f5: 7 5271 : 13            c_apply c_box
25f6: 7 5278 : 06            c_apply c_box
25f7: 7 5285 : 00            0
25f8: 6 5292 : 60            rts
25f8: 6 5298 :           txt_clock:
2600: 6 5304 : 75 6e 74 69 74 6c 65 64    "untitled" 0
2601: 6 5310 : 00            "untitled" 0
2601: 6 5316 :           boot:
2602: 2 5322 : a9 a9         lda #<exec_script
2604: 4 5324 : 8d 16 03      sta $316
2607: 2 5328 : a9 24         lda #>exec_script
2609: 4 5330 : 8d 17 03      sta $317
260c: 7 5334 : 00            brk
260d: 7 5341 : 0a            c_setzw s $00 $88
260e: 7 5348 : 00            c_setzw s $00 $88
260f: 7 5355 : 00            c_setzw s $00 $88
2610: 7 5362 : 88            c_setzw s $00 $88
2611: 7 5369 : 0a            c_setzw d $00 $30
2612: 7 5376 : 02            c_setzw d $00 $30
2613: 7 5383 : 00            c_setzw d $00 $30
2614: 7 5390 : 30            c_setzw d $00 $30
2615: 7 5397 : 09            c_setzb font_compression 2
2616: 7 5404 : 14            c_setzb font_compression 2
2617: 7 5411 : 02            c_setzb font_compression 2
2618: 7 5418 : 00            0
2619: 6 5425 : 20 2d 27      jsr compress_font
261c: 6 5431 : 20 2e 24      jsr gfx_init
261c: 6 5437 :           redraw:
261f: 7 5443 : 00            brk
2620: 7 5450 : 09            c_setzb font $88
2621: 7 5457 : 21            c_setzb font $88
2622: 7 5464 : 88            c_setzb font $88
2623: 7 5471 : 02            c_setpattern <pat_background >pat_background
2624: 7 5478 : c1            c_setpattern <pat_background >pat_background
2625: 7 5485 : 20            c_setpattern <pat_background >pat_background
2626: 7 5492 : 06            c_box 0 0 @(-- screen_width) screen_height
2627: 7 5499 : 00            c_box 0 0 @(-- screen_width) screen_height
2628: 7 5506 : 00            c_box 0 0 @(-- screen_width) screen_height
2629: 7 5513 : 9f            c_box 0 0 @(-- screen_width) screen_height
262a: 7 5520 : b0            c_box 0 0 @(-- screen_width) screen_height
262b: 7 5527 : 02            c_setpattern <pat_empty >pat_empty
262c: 7 5534 : b1            c_setpattern <pat_empty >pat_empty
262d: 7 5541 : 20            c_setpattern <pat_empty >pat_empty
262e: 7 5548 : 06            c_box 8 4 @(- screen_width 16) 119
262f: 7 5555 : 08            c_box 8 4 @(- screen_width 16) 119
2630: 7 5562 : 04            c_box 8 4 @(- screen_width 16) 119
2631: 7 5569 : 90            c_box 8 4 @(- screen_width 16) 119
2632: 7 5576 : 77            c_box 8 4 @(- screen_width 16) 119
2633: 7 5583 : 02            c_setpattern <pat_solid >pat_solid
2634: 7 5590 : b9            c_setpattern <pat_solid >pat_solid
2635: 7 5597 : 20            c_setpattern <pat_solid >pat_solid
2636: 7 5604 : 13            c_apply c_frame
2637: 7 5611 : 05            c_apply c_frame
2638: 7 5618 : 0f            c_addx 2
2639: 7 5625 : 02            c_addx 2
263a: 7 5632 : 10            c_addy 3
263b: 7 5639 : 03            c_addy 3
263c: 7 5646 : 0a            c_setzw p <txt_welcome >txt_welcome
263d: 7 5653 : 06            c_setzw p <txt_welcome >txt_welcome
263e: 7 5660 : 78            c_setzw p <txt_welcome >txt_welcome
263f: 7 5667 : 26            c_setzw p <txt_welcome >txt_welcome
2640: 7 5674 : 00            0
2640: 7 5681 :           l:  ldy #0
2641: 2 5688 : a0 00     l:  ldy #0
2643: 5 5690 : b1 06         lda (p),y
2645: 2 5695 : f0 18         beq +done
2647: 3 5697 : a5 19         lda xpos
2649: 3 5700 : 48            pha
264a: 3 5703 : a5 1a         lda ypos
264c: 3 5706 : 48            pha
264d: 6 5709 : 20 15 24      jsr putstring
2650: 2 5715 : a9 30         lda #$30
2652: 3 5717 : 85 21         sta font
2654: 4 5720 : 68            pla
2655: 2 5724 : 69 0a         adc #10
2657: 3 5726 : 85 1a         sta ypos
2659: 4 5729 : 68            pla
265a: 3 5733 : 85 19         sta xpos
265c: 4 5736 : 4c 41 26      jmp -l
265c: 4 5740 :           done:
265f: 7 5744 : 00            brk
2660: 7 5751 : 09            c_setzb xpos 80
2661: 7 5758 : 19            c_setzb xpos 80
2662: 7 5765 : 50            c_setzb xpos 80
2663: 7 5772 : 09            c_setzb ypos 120
2664: 7 5779 : 1a            c_setzb ypos 120
2665: 7 5786 : 78            c_setzb ypos 120
2666: 7 5793 : 09            c_setzb width 60
2667: 7 5800 : 1d            c_setzb width 60
2668: 7 5807 : 3c            c_setzb width 60
2669: 7 5814 : 09            c_setzb height 50
266a: 7 5821 : 1e            c_setzb height 50
266b: 7 5828 : 32            c_setzb height 50
266c: 7 5835 : 00            0
266d: 6 5842 : 20 9f 25      jsr window
266d: 6 5848 :           l:  jsr $ffe4
2670: 6 5854 : 20 e4 ff  l:  jsr $ffe4
2673: 2 5860 : f0 fb         beq -l
2675: 4 5862 : 4c 1f 26      jmp redraw
2675: 4 5866 :           txt_welcome:
2689: 4 5870 : 43 6f 6d 6d 6f 64 6f 72 65 20 56 49 43 2d 32 30 20 47 55 49    "Commodore VIC-20 GUI" 0
268a: 4 5874 : 00            "Commodore VIC-20 GUI" 0
268b: 4 5878 : 20            " " 0
268c: 4 5882 : 00            " " 0
268d: 4 5886 : 20            " " 0
268e: 4 5890 : 00            " " 0
26a5: 4 5894 : 47 72 61 70 68 69 63 73 20 70 72 69 6d 69 74 69 76 65 73 20 61 6e 64    "Graphics primitives and" 0
26a6: 4 5898 : 00            "Graphics primitives and" 0
26c3: 4 5902 : 76 61 72 69 61 62 6c 65 20 77 69 64 74 68 20 66 6f 6e 74 20 72 65 6e 64 65 72 69 6e 67    "variable width font rendering" 0
26c4: 4 5906 : 00            "variable width font rendering" 0
26d4: 4 5910 : 69 6e 20 6c 65 73 73 20 74 68 61 6e 20 32 4b 2e    "in less than 2K." 0
26d5: 4 5914 : 00            "in less than 2K." 0
26d6: 4 5918 : 20            " " 0
26d7: 4 5922 : 00            " " 0
26f2: 4 5926 : 54 68 69 73 20 66 6f 6e 74 20 69 73 20 67 65 6e 65 72 61 74 65 64 20 66 72 6f 6d    "This font is generated from" 0
26f3: 4 5930 : 00            "This font is generated from" 0
270e: 4 5934 : 74 68 65 20 73 79 73 74 65 6d 20 66 6f 6e 74 20 61 74 20 73 74 61 72 74 75 70 2e    "the system font at startup." 0
270f: 4 5938 : 00            "the system font at startup." 0
2710: 4 5942 : 20            " " 0
2711: 4 5946 : 00            " " 0
2728: 4 5950 : 41 6c 6c 20 64 72 61 77 69 6e 67 20 69 73 20 63 6c 69 70 70 65 64 2e    "All drawing is clipped." 0
2729: 4 5954 : 00            "All drawing is clipped." 0
272a: 4 5958 : 00            0
272a: 4 5962 :           compress_font:
272d: 2 5966 : a9 00         lda #0
272f: 3 5968 : 85 0e         sta tmp2
272f: 3 5971 :           next_char:
2731: 2 5974 : a9 80         lda #128
2733: 3 5976 : 85 0d         sta tmp
2735: 2 5979 : a2 00         ldx #0
2735: 2 5981 :           next_bit:
2737: 2 5983 : a0 00         ldy #0
2737: 2 5985 :           next_line:
2739: 5 5987 : b1 00         lda (s),y
273b: 3 5992 : 25 0d         and tmp
273d: 2 5995 : f0 04         beq +n
273f: 2 5997 : 38            sec
2740: 4 5999 : 4c 44 27      jmp +m
2740: 4 6003 :           n:  clc
2743: 2 6007 : 18        n:  clc
2743: 2 6009 :           m:  ror buffer1,x
2744: 7 6011 : 7e ca 27  m:  ror buffer1,x
2747: 2 6018 : c8            iny
2748: 2 6020 : c0 08         cpy #8
274a: 2 6022 : d0 ed         bne -next_line
274c: 2 6024 : e8            inx
274d: 5 6026 : 46 0d         lsr tmp
274f: 2 6031 : d0 e6         bne -next_bit
2751: 2 6033 : a2 07         ldx #7
2753: 2 6035 : a9 00         lda #0
2753: 2 6037 :           l:  sta buffer2,x
2755: 4 6039 : 9d d2 27  l:  sta buffer2,x
2758: 2 6043 : ca            dex
2759: 2 6045 : 10 fa         bpl -l
275b: 4 6047 : ad ca 27      lda buffer1
275e: 4 6051 : 8d d2 27      sta buffer2
2761: 3 6055 : a5 14         lda font_compression
2763: 3 6058 : 85 0d         sta tmp
2765: 2 6061 : a2 01         ldx #1
2767: 2 6063 : a0 01         ldy #1
2767: 2 6065 :           l:  lda buffer1,x
2769: 4 6067 : bd ca 27  l:  lda buffer1,x
276c: 4 6071 : 99 d2 27      sta buffer2,y
276f: 4 6075 : d9 d1 27      cmp @(-- buffer2),y
2772: 2 6079 : f0 04         beq +n
2772: 2 6081 :           j:  iny
2774: 2 6083 : c8        j:  iny
2775: 4 6085 : 4c 7c 27      jmp +m
2775: 4 6089 :           n:  dec tmp
2778: 5 6093 : c6 0d     n:  dec tmp
277a: 2 6098 : 30 f8         bmi -j
277a: 2 6100 :           m:  inx
277c: 2 6102 : e8        m:  inx
277d: 2 6104 : e0 08         cpx #8
277f: 2 6106 : d0 e8         bne -l
2781: 2 6108 : a9 01         lda #1
2783: 3 6110 : 85 0d         sta tmp
2785: 2 6113 : a2 00         ldx #0
2785: 2 6115 :           next_bit:
2787: 2 6117 : a0 00         ldy #0
2787: 2 6119 :           next_line:
2789: 4 6121 : b9 d2 27      lda buffer2,y
278c: 3 6125 : 25 0d         and tmp
278e: 2 6128 : f0 04         beq +n
2790: 2 6130 : 38            sec
2791: 4 6132 : 4c 95 27      jmp +m
2791: 4 6136 :           n:  clc
2794: 2 6140 : 18        n:  clc
2794: 2 6142 :           m:  rol buffer1,x
2795: 7 6144 : 3e ca 27  m:  rol buffer1,x
2798: 2 6151 : c8            iny
2799: 2 6153 : c0 08         cpy #8
279b: 2 6155 : d0 ec         bne -next_line
279d: 2 6157 : e8            inx
279e: 5 6159 : 06 0d         asl tmp
27a0: 2 6164 : d0 e5         bne -next_bit
27a2: 2 6166 : a0 07         ldy #7
27a2: 2 6168 :           l:  lda buffer1,y
27a4: 4 6170 : b9 ca 27  l:  lda buffer1,y
27a7: 5 6174 : 91 02         sta (d),y
27a9: 2 6179 : 88            dey
27aa: 2 6181 : 10 f8         bpl -l
27ac: 3 6183 : a5 00         lda s
27ae: 2 6186 : 18            clc
27af: 2 6188 : 69 08         adc #8
27b1: 3 6190 : 85 00         sta s
27b3: 2 6193 : 90 02         bcc +n
27b5: 5 6195 : e6 01         inc @(++ s)
27b5: 5 6200 :           n:
27b7: 3 6205 : a5 02         lda d
27b9: 2 6208 : 18            clc
27ba: 2 6210 : 69 08         adc #8
27bc: 3 6212 : 85 02         sta d
27be: 2 6215 : 90 02         bcc +n
27c0: 5 6217 : e6 03         inc @(++ d)
27c0: 5 6222 :           n:
27c2: 5 6227 : c6 0e         dec tmp2
27c4: 2 6232 : f0 03         beq +done
27c6: 4 6234 : 4c 31 27      jmp next_char
27c6: 4 6238 :           done:
27c9: 6 6242 : 60            rts
27c9: 6 6248 :           buffer1:    fill 8
27d1: 6 6254 : 00 00 00 00 00 00 00 00buffer1:    fill 8
27d1: 6 6260 :           buffer2:    fill 8
27d9: 6 6266 : 00 00 00 00 00 00 00 00buffer2:    fill 8
27d9: 6 6272 :           kernal_end:
