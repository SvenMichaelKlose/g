0000: 5 0 :              vicreg_interlace_horigin        = $9000
0000: 5 5 :              vicreg_vorigin                  = $9001
0000: 5 10 :             vicreg_screenlo_columns         = $9002
0000: 5 15 :             vicreg_rasterlo_rows_charsize   = $9003
0000: 5 20 :             vicreg_rasterhi                 = $9004
0000: 5 25 :             vicreg_screenhi_charset         = $9005
0000: 5 30 :             vicreg_hpen                     = $9006
0000: 5 35 :             vicreg_vpen                     = $9007
0000: 5 40 :             vicreg_paddle1                  = $9008
0000: 5 45 :             vicreg_paddle2                  = $9009
0000: 5 50 :             vicreg_bass                     = $900a
0000: 5 55 :             vicreg_alto                     = $900b
0000: 5 60 :             vicreg_soprano                  = $900c
0000: 5 65 :             vicreg_noise                    = $900d
0000: 5 70 :             vicreg_auxcol_volume            = $900e
0000: 5 75 :             vicreg_screencol_reverse_border = $900f
0000: 5 80 :             vic_screen_1000      = %11000000
0000: 5 85 :             vic_screen_1200      = %11000000
0000: 5 90 :             vic_screen_1400      = %11010000
0000: 5 95 :             vic_screen_1600      = %11010000
0000: 5 100 :            vic_screen_1800      = %11100000
0000: 5 105 :            vic_screen_1a00      = %11100000
0000: 5 110 :            vic_screen_1c00      = %11110000
0000: 5 115 :            vic_screen_1e00      = %11110000
0000: 5 120 :            charset_upcase          = $8000
0000: 5 125 :            charset_upcase_reversed = $8400
0000: 5 130 :            charset_locase          = $8800
0000: 5 135 :            charset_locase_reversed = $8c00
0000: 5 140 :            vic_charset_upcase   = %0000
0000: 5 145 :            vic_charset_8000     = %0000
0000: 5 150 :            vic_charset_upcase_reversed = %0001
0000: 5 155 :            vic_charset_8400     = %0001
0000: 5 160 :            vic_charset_locase   = %0010
0000: 5 165 :            vic_charset_8800     = %0010
0000: 5 170 :            vic_charset_locase_reversed = %0011
0000: 5 175 :            vic_charset_8c00     = %0011
0000: 5 180 :            vic_charset_1000     = %1100
0000: 5 185 :            vic_charset_1400     = %1101
0000: 5 190 :            vic_charset_1800     = %1110
0000: 5 195 :            vic_charset_1c00_up  = %1111
0000: 5 200 :            vic_charset_1c00     = %1111
0000: 5 205 :            reverse = 8
0000: 5 210 :            multicolor = 8
0000: 5 215 :            black        = 0
0000: 5 220 :            white        = 1
0000: 5 225 :            red          = 2
0000: 5 230 :            cyan         = 3
0000: 5 235 :            purple       = 4
0000: 5 240 :            green        = 5
0000: 5 245 :            blue         = 6
0000: 5 250 :            yellow       = 7
0000: 5 255 :            orange       = 8
0000: 5 260 :            light_orange = 9
0000: 5 265 :            pink         = 10
0000: 5 270 :            light_cyan   = 11
0000: 5 275 :            light_purple = 12
0000: 5 280 :            light_green  = 13
0000: 5 285 :            light_blue   = 14
0000: 5 290 :            light_yellow = 15
0000: 5 295 :            clk_bass_pal    = 4329
0000: 5 300 :            clk_alto_pal    = 8659
0000: 5 305 :            clk_soprano_pal = 17320
0000: 5 310 :            clk_noise_pal   = 34640
0000: 5 315 :            clk_bass_ntsc    = 3995
0000: 5 320 :            clk_alto_ntsc    = 7990
0000: 5 325 :            clk_soprano_ntsc = 15980
0000: 5 330 :            clk_noise_ntsc   = 31960
0000: 5 335 :            joy_fire    = %00100000
0000: 5 340 :            joy_up      = %00000100
0000: 5 345 :            joy_down    = %00001000
0000: 5 350 :            joy_left    = %00010000
0000: 5 355 :            screen_columns  = 20
0000: 5 360 :            screen_rows     = 12
0000: 5 365 :            screen_width    = @(* 8 screen_columns)
0000: 5 370 :            screen_height   = @(* 16 screen_rows)
0000: 5 375 :            screen  = $1000
0000: 5 380 :            colors  = $9400
0000: 5 385 :            charset = $1100
0000: 5 390 :            char_offset = 16
0000: 5 395 :                data
0000: 5 400 :                org 0
0000: 5 405 :            s:      0 0
0000: 5 410 :            s:      0 0
0000: 5 415 :            s:      0 0
0000: 5 420 :            d:      0 0
0000: 5 425 :            d:      0 0
0000: 5 430 :            d:      0 0
0000: 5 435 :            c:      0 0
0000: 5 440 :            c:      0 0
0000: 5 445 :            c:      0 0
0000: 5 450 :            p:      0
0000: 5 455 :            p:      0
0000: 5 460 :            ph:     0
0000: 5 465 :            ph:     0
0000: 5 470 :            sa:     0 0     ; Bytecode argument list.
0000: 5 475 :            sa:     0 0     ; Bytecode argument list.
0000: 5 480 :            sa:     0 0     ; Bytecode argument list.
0000: 5 485 :            sp:     0 0     ; Bytecode pointer.
0000: 5 490 :            sp:     0 0     ; Bytecode pointer.
0000: 5 495 :            sp:     0 0     ; Bytecode pointer.
0000: 5 500 :            srx:    0       ; Saved X register.
0000: 5 505 :            srx:    0       ; Saved X register.
0000: 5 510 :            tmp:    0
0000: 5 515 :            tmp:    0
0000: 5 520 :            tmp2:   0
0000: 5 525 :            tmp2:   0
0000: 5 530 :            tmp3:   0
0000: 5 535 :            tmp3:   0
0000: 5 540 :            tmp4:   0
0000: 5 545 :            tmp4:   0
0000: 5 550 :            scr:    0 0     ; Current screen address.
0000: 5 555 :            scr:    0 0     ; Current screen address.
0000: 5 560 :            scr:    0 0     ; Current screen address.
0000: 5 565 :            xcpos:  0       ; X columns.
0000: 5 570 :            xcpos:  0       ; X columns.
0000: 5 575 :            font_compression: 0
0000: 5 580 :            font_compression: 0
0000: 5 585 :            context_start:
0000: 5 590 :            rxl:    0
0000: 5 595 :            rxl:    0
0000: 5 600 :            ryt:    0
0000: 5 605 :            ryt:    0
0000: 5 610 :            rxr:    0
0000: 5 615 :            rxr:    0
0000: 5 620 :            ryb:    0
0000: 5 625 :            ryb:    0
0000: 5 630 :            xpos:   0       ; X position
0000: 5 635 :            xpos:   0       ; X position
0000: 5 640 :            ypos:   0       ; Y position
0000: 5 645 :            ypos:   0       ; Y position
0000: 5 650 :            xpos2:  0       ; X position
0000: 5 655 :            xpos2:  0       ; X position
0000: 5 660 :            ypos2:  0       ; Y position
0000: 5 665 :            ypos2:  0       ; Y position
0000: 5 670 :            width:  0       ; Width
0000: 5 675 :            width:  0       ; Width
0000: 5 680 :            height: 0       ; Height
0000: 5 685 :            height: 0       ; Height
0000: 5 690 :            pattern: 0
0000: 5 695 :            pattern: 0
0000: 5 700 :            patternh: 0
0000: 5 705 :            patternh: 0
0000: 5 710 :            font:   0       ; Font starting page.
0000: 5 715 :            font:   0       ; Font starting page.
0000: 5 720 :            font_space_size: 0 ; Width of an empty character.
0000: 5 725 :            font_space_size: 0 ; Width of an empty character.
0000: 5 730 :            do_compress_font_gaps: 0
0000: 5 735 :            do_compress_font_gaps: 0
0000: 5 740 :            masks:  0       ; Source mask.
0000: 5 745 :            masks:  0       ; Source mask.
0000: 5 750 :            maskd:  0       ; Destination mask.
0000: 5 755 :            maskd:  0       ; Destination mask.
0000: 5 760 :            context_end:
0000: 5 765 :            context_size = @(- context_end context_start)
0000: 5 770 :                end
0000: 5 775 :                org @(- (basic-start-address *model*) 2)
0000: 5 780 :            load_address:
0001: 5 785 : 01             @(low (basic-start-address *model*))
0002: 5 790 : 12             @(high (basic-start-address *model*))
0003: 5 795 : 0b             @(unless (first-pass?) (low basic_end))
0004: 5 800 : 12             @(unless (first-pass?) (high basic_end))
0005: 5 805 : 01             $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
0006: 5 810 : 00             $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
0007: 5 815 : 9e             $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
000b: 5 820 : 34 36 32 31    $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
000c: 5 825 : 00             $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
000c: 5 830 :            basic_end:
000d: 5 835 : 00             $00 $00
000e: 5 840 : 00             $00 $00
000e: 5 845 :            main:
120d: 2 850 : a2 05          ldx #@(- cinfo_end cinfo 1)
120d: 2 852 :            l:  lda cinfo,x
120f: 4 854 : bd 3c 12   l:  lda cinfo,x
1212: 4 858 : 95 00          sta s,x
1214: 2 862 : ca             dex
1215: 2 864 : 10 f8          bpl -l
1217: 2 866 : a0 00          ldy #0
1217: 2 868 :            l:  lda (s),y
1219: 5 870 : b1 00      l:  lda (s),y
121b: 5 875 : 91 02          sta (d),y
121d: 5 880 : c6 00          dec s
121f: 3 885 : a5 00          lda s
1221: 2 888 : c9 ff          cmp #$ff
1223: 2 890 : d0 02          bne +n
1225: 5 892 : c6 01          dec @(++ s)
1225: 5 897 :            n:  dec d
1227: 5 902 : c6 02      n:  dec d
1229: 3 907 : a5 02          lda d
122b: 2 910 : c9 ff          cmp #$ff
122d: 2 912 : d0 02          bne +n
122f: 5 914 : c6 03          dec @(++ d)
122f: 5 919 :            n:  dec c
1231: 5 924 : c6 04      n:  dec c
1233: 2 929 : d0 e4          bne -l
1235: 5 931 : c6 05          dec @(++ c)
1237: 2 936 : d0 e0          bne -l
1239: 4 938 : 4c 00 26       jmp boot
1239: 4 942 :            kernal_size         = @(- kernal_end kernal)
1239: 4 946 :            loaded_kernal_end   = @(+ loaded_kernal (-- kernal_size))
1239: 4 950 :            kernal_end2         = @(-- kernal_end)
1239: 4 954 :            cinfo:
1239: 4 958 :            cinfo_kernal:
123a: 4 962 : 19             <loaded_kernal_end >loaded_kernal_end
123b: 4 966 : 1a             <loaded_kernal_end >loaded_kernal_end
123c: 4 970 : d7             <kernal_end2 >kernal_end2
123d: 4 974 : 27             <kernal_end2 >kernal_end2
123e: 4 978 : d8             <kernal_size @(++ >kernal_size)
123f: 4 982 : 08             <kernal_size @(++ >kernal_size)
123f: 4 986 :            cinfo_kernal_end:
123f: 4 990 :            cinfo_end:
123f: 4 994 :            loaded_kernal:
123f: 4 998 :                org $2000
123f: 4 1002 :           kernal:
2000: 4 1006 : 4c f5 20  jmp calcscr
2003: 4 1010 : 4c 65 25  jmp setpattern
2006: 4 1014 : 4c 82 21  jmp vline
2009: 4 1018 : 4c e4 21  jmp hline
200c: 4 1022 : 4c 88 22  jmp frame
200f: 4 1026 : 4c ab 22  jmp box
2012: 4 1030 : 4c 15 24  jmp putstring
2015: 4 1034 : 4c 64 23  jmp putchar
2015: 4 1038 : 4c f5 20 4c 65 25 4c 82 21 4c e4 21 4c 88 22 4c ab 22 4c 15 24 4c 64 23    @(syscall-table)
2015: 4 1042 :           c_calcscr=1
2015: 4 1046 :           c_setpattern=2
2015: 4 1050 :           c_vline=3
2015: 4 1054 :           c_hline=4
2015: 4 1058 :           c_frame=5
2015: 4 1062 :           c_box=6
2015: 4 1066 :           c_putstring=7
2015: 4 1070 :           c_putchar=8
2015: 4 1074 :           c_setzb=9
2015: 4 1078 :           c_setzw=10
2015: 4 1082 :           c_setzs=11
2015: 4 1086 :           c_addzb=12
2015: 4 1090 :           c_sbczb=13
2015: 4 1094 :           c_sbczbi=14
2015: 4 1098 :           c_addx=15
2015: 4 1102 :           c_addy=16
2015: 4 1106 :           c_pushz=17
2015: 4 1110 :           c_popz=18
2015: 4 1114 :           c_apply=19
2015: 4 1118 :           @(syscall-bytecodes)
2015: 4 1122 :           syscall_vectors_l:
2016: 4 1126 : f5        <calcscr
2017: 4 1130 : 65        <setpattern
2018: 4 1134 : 82        <vline
2019: 4 1138 : e4        <hline
201a: 4 1142 : 88        <frame
201b: 4 1146 : ab        <box
201c: 4 1150 : 15        <putstring
201d: 4 1154 : 64        <putchar
201e: 4 1158 : 2b        <setzb
201f: 4 1162 : 32        <setzw
2020: 4 1166 : 66        <setzs
2021: 4 1170 : 3d        <addzb
2022: 4 1174 : 4c        <sbczb
2023: 4 1178 : 5b        <sbczbi
2024: 4 1182 : 1b        <addx
2025: 4 1186 : 23        <addy
2026: 4 1190 : 7a        <pushz
2027: 4 1194 : 8a        <popz
2028: 4 1198 : 05        <apply
2028: 4 1202 : f5 65 82 e4 88 ab 15 64 2b 32 66 3d 4c 5b 1b 23 7a 8a 05@(syscall-vectors-l)
2028: 4 1206 :           syscall_vectors_h:
2029: 4 1210 : 20        >calcscr
202a: 4 1214 : 25        >setpattern
202b: 4 1218 : 21        >vline
202c: 4 1222 : 21        >hline
202d: 4 1226 : 22        >frame
202e: 4 1230 : 22        >box
202f: 4 1234 : 24        >putstring
2030: 4 1238 : 23        >putchar
2031: 4 1242 : 25        >setzb
2032: 4 1246 : 25        >setzw
2033: 4 1250 : 25        >setzs
2034: 4 1254 : 25        >addzb
2035: 4 1258 : 25        >sbczb
2036: 4 1262 : 25        >sbczbi
2037: 4 1266 : 25        >addx
2038: 4 1270 : 25        >addy
2039: 4 1274 : 25        >pushz
203a: 4 1278 : 25        >popz
203b: 4 1282 : 25        >apply
203b: 4 1286 : 20 25 21 21 22 22 24 23 25 25 25 25 25 25 25 25 25 25 25@(syscall-vectors-h)
203b: 4 1290 :           syscall_args_l:
203c: 4 1294 : 64        <args_calcscr
203d: 4 1298 : 67        <args_setpattern
203e: 4 1302 : 6a        <args_vline
203f: 4 1306 : 6e        <args_hline
2040: 4 1310 : 72        <args_frame
2041: 4 1314 : 77        <args_box
2042: 4 1318 : 7c        <args_putstring
2043: 4 1322 : 7f        <args_putchar
2044: 4 1326 : 80        <args_setzb
2045: 4 1330 : 83        <args_setzw
2046: 4 1334 : 87        <args_setzs
2047: 4 1338 : 8a        <args_addzb
2048: 4 1342 : 8e        <args_sbczb
2049: 4 1346 : 92        <args_sbczbi
204a: 4 1350 : 95        <args_addx
204b: 4 1354 : 97        <args_addy
204c: 4 1358 : 99        <args_pushz
204d: 4 1362 : 9c        <args_popz
204e: 4 1366 : 9f        <args_apply
204e: 4 1370 : 64 67 6a 6e 72 77 7c 7f 80 83 87 8a 8e 92 95 97 99 9c 9f@(syscall-args-l)
204e: 4 1374 :           syscall_args_h:
204f: 4 1378 : 20        >args_calcscr
2050: 4 1382 : 20        >args_setpattern
2051: 4 1386 : 20        >args_vline
2052: 4 1390 : 20        >args_hline
2053: 4 1394 : 20        >args_frame
2054: 4 1398 : 20        >args_box
2055: 4 1402 : 20        >args_putstring
2056: 4 1406 : 20        >args_putchar
2057: 4 1410 : 20        >args_setzb
2058: 4 1414 : 20        >args_setzw
2059: 4 1418 : 20        >args_setzs
205a: 4 1422 : 20        >args_addzb
205b: 4 1426 : 20        >args_sbczb
205c: 4 1430 : 20        >args_sbczbi
205d: 4 1434 : 20        >args_addx
205e: 4 1438 : 20        >args_addy
205f: 4 1442 : 20        >args_pushz
2060: 4 1446 : 20        >args_popz
2061: 4 1450 : 20        >args_apply
2061: 4 1454 : 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20@(syscall-args-h)
2061: 4 1458 :           args_calcscr:
2062: 4 1462 : 02        2
2063: 4 1466 : 19        xpos
2064: 4 1470 : 1a        ypos
2064: 4 1474 :           args_setpattern:
2065: 4 1478 : 02        2
2066: 4 1482 : 1f        pattern
2067: 4 1486 : 20        patternh
2067: 4 1490 :           args_vline:
2068: 4 1494 : 03        3
2069: 4 1498 : 19        xpos
206a: 4 1502 : 1a        ypos
206b: 4 1506 : 1e        height
206b: 4 1510 :           args_hline:
206c: 4 1514 : 03        3
206d: 4 1518 : 19        xpos
206e: 4 1522 : 1a        ypos
206f: 4 1526 : 1d        width
206f: 4 1530 :           args_frame:
2070: 4 1534 : 04        4
2071: 4 1538 : 19        xpos
2072: 4 1542 : 1a        ypos
2073: 4 1546 : 1d        width
2074: 4 1550 : 1e        height
2074: 4 1554 :           args_box:
2075: 4 1558 : 04        4
2076: 4 1562 : 19        xpos
2077: 4 1566 : 1a        ypos
2078: 4 1570 : 1d        width
2079: 4 1574 : 1e        height
2079: 4 1578 :           args_putstring:
207a: 4 1582 : 02        2
207b: 4 1586 : 06        p
207c: 4 1590 : 07        ph
207c: 4 1594 :           args_putchar:
207d: 4 1598 : 00        0
207d: 4 1602 :           args_setzb:
207e: 4 1606 : 02        2
207f: 4 1610 : 0d        tmp
2080: 4 1614 : 0e        tmp2
2080: 4 1618 :           args_setzw:
2081: 4 1622 : 03        3
2082: 4 1626 : 0d        tmp
2083: 4 1630 : 0e        tmp2
2084: 4 1634 : 0f        tmp3
2084: 4 1638 :           args_setzs:
2085: 4 1642 : 02        2
2086: 4 1646 : 02        d
2087: 4 1650 : 0d        tmp
2087: 4 1654 :           args_addzb:
2088: 4 1658 : 03        3
2089: 4 1662 : 0d        tmp
208a: 4 1666 : 0e        tmp2
208b: 4 1670 : 0f        tmp3
208b: 4 1674 :           args_sbczb:
208c: 4 1678 : 03        3
208d: 4 1682 : 0d        tmp
208e: 4 1686 : 0e        tmp2
208f: 4 1690 : 0f        tmp3
208f: 4 1694 :           args_sbczbi:
2090: 4 1698 : 02        2
2091: 4 1702 : 0d        tmp
2092: 4 1706 : 0e        tmp2
2092: 4 1710 :           args_addx:
2093: 4 1714 : 01        1
2094: 4 1718 : 0d        tmp
2094: 4 1722 :           args_addy:
2095: 4 1726 : 01        1
2096: 4 1730 : 0d        tmp
2096: 4 1734 :           args_pushz:
2097: 4 1738 : 02        2
2098: 4 1742 : 0d        tmp
2099: 4 1746 : 0e        tmp2
2099: 4 1750 :           args_popz:
209a: 4 1754 : 02        2
209b: 4 1758 : 0d        tmp
209c: 4 1762 : 0e        tmp2
209c: 4 1766 :           args_apply:
209d: 4 1770 : 00        0
209d: 4 1774 : 02 19 1a 02 1f 20 03 19 1a 1e 03 19 1a 1d 04 19 1a 1d 1e 04 19 1a 1d 1e 02 06 07 00 02 0d 0e 03 0d 0e 0f 02 02 0d 03 0d 0e 0f 03 0d 0e 0f 02 0d 0e 01 0d 01 0d 02 0d 0e 02 0d 0e 00@(syscall-args)
209d: 4 1778 :           masks_left:
209e: 4 1782 : ff            %11111111
209e: 4 1786 :           maskd_right:
209f: 4 1790 : 7f            %01111111
20a0: 4 1794 : 3f            %00111111
20a1: 4 1798 : 1f            %00011111
20a2: 4 1802 : 0f            %00001111
20a3: 4 1806 : 07            %00000111
20a4: 4 1810 : 03            %00000011
20a5: 4 1814 : 01            %00000001
20a5: 4 1818 :           maskd_left:
20a6: 4 1822 : 00            %00000000
20a6: 4 1826 :           masks_right:
20a7: 4 1830 : 80            %10000000
20a8: 4 1834 : c0            %11000000
20a9: 4 1838 : e0            %11100000
20aa: 4 1842 : f0            %11110000
20ab: 4 1846 : f8            %11111000
20ac: 4 1850 : fc            %11111100
20ad: 4 1854 : fe            %11111110
20ae: 4 1858 : ff            %11111111
20ae: 4 1862 :           pat_empty:
20af: 4 1866 : 00            0 0 0 0 0 0 0 0
20b0: 4 1870 : 00            0 0 0 0 0 0 0 0
20b1: 4 1874 : 00            0 0 0 0 0 0 0 0
20b2: 4 1878 : 00            0 0 0 0 0 0 0 0
20b3: 4 1882 : 00            0 0 0 0 0 0 0 0
20b4: 4 1886 : 00            0 0 0 0 0 0 0 0
20b5: 4 1890 : 00            0 0 0 0 0 0 0 0
20b6: 4 1894 : 00            0 0 0 0 0 0 0 0
20b6: 4 1898 :           pat_solid:
20b7: 4 1902 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20b8: 4 1906 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20b9: 4 1910 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20ba: 4 1914 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20bb: 4 1918 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20bc: 4 1922 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20bd: 4 1926 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20be: 4 1930 : ff            $ff $ff $ff $ff $ff $ff $ff $ff
20be: 4 1934 :           pat_background:
20be: 4 1938 :           pat_leaves:
20bf: 4 1942 : c0            %11000000
20c0: 4 1946 : 21            %00100001
20c1: 4 1950 : 12            %00010010
20c2: 4 1954 : 0c            %00001100
20c3: 4 1958 : 30            %00110000
20c4: 4 1962 : 40            %01000000
20c5: 4 1966 : 80            %10000000
20c6: 4 1970 : 80            %10000000
20c7: 4 1974 : c0            %11000000
20c7: 4 1978 :           pat_ovals:
20c8: 4 1982 : 41            %01000001
20c9: 4 1986 : 22            %00100010
20ca: 4 1990 : 9c            %10011100
20cb: 4 1994 : 22            %00100010
20cc: 4 1998 : 41            %01000001
20cd: 4 2002 : 80            %10000000
20ce: 4 2006 : 80            %10000000
20cf: 4 2010 : 80            %10000000
20d0: 4 2014 : 41            %01000001
20d0: 4 2018 :           pat_woven:
20d1: 4 2022 : 1f            %00011111
20d2: 4 2026 : 2e            %00101110
20d3: 4 2030 : 44            %01000100
20d4: 4 2034 : e2            %11100010
20d5: 4 2038 : f1            %11110001
20d6: 4 2042 : e8            %11101000
20d7: 4 2046 : 44            %01000100
20d8: 4 2050 : 8e            %10001110
20d8: 4 2054 :           pat_pits:
20d9: 4 2058 : fb            %11111011
20da: 4 2062 : 00            %00000000
20db: 4 2066 : fb            %11111011
20dc: 4 2070 : fb            %11111011
20dd: 4 2074 : 0a            %00001010
20de: 4 2078 : 0a            %00001010
20df: 4 2082 : 0a            %00001010
20e0: 4 2086 : 0a            %00001010
20e0: 4 2090 :           pat_gray:
20e1: 4 2094 : aa            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e2: 4 2098 : 55            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e3: 4 2102 : aa            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e4: 4 2106 : 55            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e5: 4 2110 : aa            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e6: 4 2114 : 55            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e7: 4 2118 : aa            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e8: 4 2122 : 55            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20e9: 4 2126 : aa            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20ea: 4 2130 : 55            $aa $55 $aa $55 $aa $55 $aa $55 $aa $55
20ea: 4 2134 :           pat_smiley:
20eb: 4 2138 : 3c            %00111100
20ec: 4 2142 : 42            %01000010
20ed: 4 2146 : a5            %10100101
20ee: 4 2150 : a5            %10100101
20ef: 4 2154 : 81            %10000001
20f0: 4 2158 : 5a            %01011010
20f1: 4 2162 : 24            %00100100
20f2: 4 2166 : 18            %00011000
20f2: 4 2170 :           calcscr:
20f5: 3 2174 : a5 19         lda xpos
20f7: 2 2177 : 4a            lsr
20f8: 2 2179 : 4a            lsr
20f9: 2 2181 : 4a            lsr
20fa: 3 2183 : 85 13         sta xcpos
20fc: 2 2186 : aa            tax
20fd: 3 2188 : a5 1a         lda ypos
20ff: 2 2191 : 18            clc
2100: 4 2193 : 7d 0d 21      adc column_addrs_lo,x
2103: 3 2197 : 85 11         sta scr
2105: 4 2200 : bd 21 21      lda column_addrs_hi,x
2108: 2 2204 : 69 00         adc #0
210a: 3 2206 : 85 12         sta @(++ scr)
210c: 6 2209 : 60            rts
210c: 6 2215 :           column_addrs_lo: @(maptimes [low (+ charset (* 16 screen_rows _))] screen_columns)
2120: 6 2221 : 00 c0 80 40 00 c0 80 40 00 c0 80 40 00 c0 80 40 00 c0 80 40column_addrs_lo: @(maptimes [low (+ charset (* 16 screen_rows _))] screen_columns)
2120: 6 2227 :           column_addrs_hi: @(maptimes [high (+ charset (* 16 screen_rows _))] screen_columns)
2134: 6 2233 : 11 11 12 13 14 14 15 16 17 17 18 19 1a 1a 1b 1c 1d 1d 1e 1fcolumn_addrs_hi: @(maptimes [high (+ charset (* 16 screen_rows _))] screen_columns)
2134: 6 2239 :           reset_region:
2135: 7 2245 : 00            brk
2136: 7 2252 : 0b            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
2137: 7 2259 : 15            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
2138: 7 2266 : 04            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
2139: 7 2273 : 00            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
213a: 7 2280 : 00            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
213b: 7 2287 : 9f            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
213c: 7 2294 : bf            c_setzs rxl 4 0 0 @(-- screen_width) @(-- screen_height)
213d: 7 2301 : 00            0
213e: 6 2308 : 60            rts
213e: 6 2314 :           clip_x:
213f: 2 2320 : a2 00         ldx #0
213f: 2 2322 :           clip:
2141: 4 2324 : b5 19         lda xpos,x
2143: 2 2328 : 18            clc
2144: 4 2330 : 75 1d         adc width,x
2146: 4 2334 : 95 1b         sta xpos2,x
2148: 4 2338 : b5 19         lda xpos,x
214a: 4 2342 : d5 15         cmp rxl,x
214c: 2 2346 : b0 04         bcs +n
214e: 4 2348 : b5 15         lda rxl,x
2150: 4 2352 : 95 19         sta xpos,x
2150: 4 2356 :           n:
2152: 4 2360 : b5 1b         lda xpos2,x
2154: 4 2364 : d5 17         cmp rxr,x
2156: 2 2368 : 90 04         bcc +n
2158: 4 2370 : b5 17         lda rxr,x
215a: 4 2374 : 95 1b         sta xpos2,x
215a: 4 2378 :           n:
215c: 4 2382 : b5 1b         lda xpos2,x
215e: 2 2386 : 38            sec
215f: 4 2388 : f5 19         sbc xpos,x
2161: 2 2392 : 90 03         bcc +done
2163: 4 2394 : 95 1d         sta width,x
2165: 2 2398 : 38            sec
2165: 2 2400 :           done:
2166: 6 2402 : 60            rts
2166: 6 2408 :           clip_y:
2167: 2 2414 : a2 01         ldx #1
2169: 2 2416 : d0 d6         bne clip    ; (jmp)
2169: 2 2418 :           vmaskd: %01111111
216a: 2 2420 : 7f        vmaskd: %01111111
216b: 2 2422 : bf                %10111111
216c: 2 2424 : df                %11011111
216d: 2 2426 : ef                %11101111
216e: 2 2428 : f7                %11110111
216f: 2 2430 : fb                %11111011
2170: 2 2432 : fd                %11111101
2171: 2 2434 : fe                %11111110
2171: 2 2436 :           vmasks: %10000000
2172: 2 2438 : 80        vmasks: %10000000
2173: 2 2440 : 40                %01000000
2174: 2 2442 : 20                %00100000
2175: 2 2444 : 10                %00010000
2176: 2 2446 : 08                %00001000
2177: 2 2448 : 04                %00000100
2178: 2 2450 : 02                %00000010
2179: 2 2452 : 01                %00000001
2179: 2 2454 :           done:
217b: 4 2456 : 68            pla
217c: 3 2460 : 85 1e         sta height
217e: 4 2463 : 68            pla
217f: 3 2467 : 85 1a         sta ypos
2181: 6 2470 : 60            rts
2181: 6 2476 :           vline:
2182: 3 2482 : a5 1a         lda ypos
2184: 3 2485 : 48            pha
2185: 3 2488 : a5 1e         lda height
2187: 3 2491 : 48            pha
2188: 3 2494 : a5 19         lda xpos
218a: 3 2497 : c5 15         cmp rxl
218c: 2 2500 : 90 ed         bcc -done
218e: 3 2502 : c5 17         cmp rxr
2190: 2 2505 : f0 02         beq +n
2192: 2 2507 : b0 e7         bcs -done
2192: 2 2509 :           n:  jsr clip_y
2194: 6 2511 : 20 67 21  n:  jsr clip_y
2197: 2 2517 : 90 e2         bcc -done
2199: 3 2519 : a5 19         lda xpos
219b: 2 2522 : 29 07         and #7
219d: 2 2524 : aa            tax
219e: 4 2526 : bd 73 21      lda vmasks,x
21a1: 3 2530 : 85 24         sta masks
21a3: 4 2533 : bd 6b 21      lda vmaskd,x
21a6: 3 2537 : 85 25         sta maskd
21a8: 6 2540 : 20 ae 21      jsr vfill
21ab: 4 2546 : 4c 7b 21      jmp -done
21ab: 4 2550 :           vfill:
21ae: 6 2554 : 20 f5 20      jsr calcscr
21b1: 3 2560 : a5 1f         lda pattern
21b3: 4 2563 : 8d c9 21      sta @(+ 1 +mod_pattern)
21b6: 3 2567 : a5 20         lda @(+ 1 pattern)
21b8: 4 2570 : 8d ca 21      sta @(+ 2 +mod_pattern)
21bb: 3 2574 : a4 1e         ldy height
21bd: 2 2577 : 88            dey
21bd: 2 2579 :           l:  tya
21be: 2 2581 : 98        l:  tya
21bf: 2 2583 : 29 07         and #7
21c1: 2 2585 : aa            tax
21c2: 5 2587 : b1 11         lda (scr),y
21c4: 3 2592 : 25 25         and maskd
21c6: 3 2595 : 85 0d         sta tmp
21c6: 3 2598 :           mod_pattern:
21c8: 4 2601 : bd ff ff      lda $ffff,x
21cb: 3 2605 : 25 24         and masks
21cd: 3 2608 : 05 0d         ora tmp
21cf: 5 2611 : 91 11         sta (scr),y
21d1: 2 2616 : 88            dey
21d2: 2 2618 : c0 ff         cpy #255
21d4: 2 2620 : d0 e8         bne -l
21d6: 6 2622 : 60            rts
21d6: 6 2628 :           inc_xcpos:
21d7: 3 2634 : a5 11         lda scr
21d9: 2 2637 : 18            clc
21da: 2 2639 : 69 c0         adc #@(* 16 screen_rows)
21dc: 3 2641 : 85 11         sta scr
21de: 2 2644 : 90 02         bcc +n
21e0: 5 2646 : e6 12         inc @(++ scr)
21e0: 5 2651 :           n:  rts
21e2: 6 2656 : 60        n:  rts
21e2: 6 2662 :           xposr:  0
21e3: 6 2668 : 00        xposr:  0
21e3: 6 2674 :           hline:
21e4: 3 2680 : a5 19         lda xpos
21e6: 3 2683 : 48            pha
21e7: 3 2686 : a5 1d         lda width
21e9: 3 2689 : 48            pha
21ea: 3 2692 : a5 1a         lda ypos
21ec: 3 2695 : c5 16         cmp ryt
21ee: 2 2698 : 90 68         bcc +done
21f0: 3 2700 : c5 18         cmp ryb
21f2: 2 2703 : f0 02         beq +n
21f4: 2 2705 : b0 62         bcs +done
21f4: 2 2707 :           n:  jsr clip_x
21f6: 6 2709 : 20 3f 21  n:  jsr clip_x
21f9: 2 2715 : 90 5d         bcc +done
21fb: 6 2717 : 20 f5 20      jsr calcscr
21fe: 3 2723 : a5 1a         lda ypos
2200: 2 2726 : 29 07         and #7
2202: 2 2728 : a8            tay
2203: 5 2730 : b1 1f         lda (pattern),y
2205: 3 2735 : 85 0e         sta tmp2
2207: 3 2738 : a5 19         lda xpos
2209: 2 2741 : a8            tay
220a: 2 2743 : 18            clc
220b: 3 2745 : 65 1d         adc width
220d: 4 2748 : 8d e3 21      sta xposr
2210: 2 2752 : 4a            lsr
2211: 2 2754 : 4a            lsr
2212: 2 2756 : 4a            lsr
2213: 2 2758 : 38            sec
2214: 3 2760 : e5 13         sbc xcpos
2216: 2 2763 : f0 47         beq single_column
2218: 3 2765 : 85 04         sta c
221a: 2 2768 : 98            tya
221b: 2 2770 : 29 07         and #7
221d: 2 2772 : aa            tax
221e: 2 2774 : a0 00         ldy #0
2220: 5 2776 : b1 11         lda (scr),y
2222: 4 2781 : 3d a8 20      and maskd_left,x
2225: 3 2785 : 85 0d         sta tmp
2227: 3 2788 : a5 0e         lda tmp2
2229: 4 2791 : 3d a0 20      and masks_left,x
222c: 3 2795 : 05 0d         ora tmp
222e: 5 2798 : 91 11         sta (scr),y
2230: 6 2803 : 20 d7 21      jsr inc_xcpos
2233: 5 2809 : c6 04         dec c
2235: 2 2814 : f0 0b         beq +right_end
2235: 2 2816 :           l:  lda tmp2
2237: 3 2818 : a5 0e     l:  lda tmp2
2239: 5 2821 : 91 11         sta (scr),y
223b: 6 2826 : 20 d7 21      jsr inc_xcpos
223e: 5 2832 : c6 04         dec c
2240: 2 2837 : d0 f5         bne -l
2240: 2 2839 :           right_end:
2242: 4 2841 : ad e3 21      lda xposr
2245: 2 2845 : 29 07         and #7
2247: 2 2847 : aa            tax
2248: 5 2849 : b1 11         lda (scr),y
224a: 4 2854 : 3d a1 20      and maskd_right,x
224d: 3 2858 : 85 0d         sta tmp
224f: 3 2861 : a5 0e         lda tmp2
2251: 4 2864 : 3d a9 20      and masks_right,x
2254: 3 2868 : 05 0d         ora tmp
2256: 5 2871 : 91 11         sta (scr),y
2256: 5 2876 :           done:
2258: 4 2881 : 68            pla
2259: 3 2885 : 85 1d         sta width
225b: 4 2888 : 68            pla
225c: 3 2892 : 85 19         sta xpos
225e: 6 2895 : 60            rts
225e: 6 2901 :           single_column:
225f: 2 2907 : 98            tya
2260: 2 2909 : 29 07         and #7
2262: 2 2911 : aa            tax
2263: 4 2913 : ad e3 21      lda xposr
2266: 2 2917 : 29 07         and #7
2268: 2 2919 : a8            tay
2269: 4 2921 : bd a0 20      lda masks_left,x
226c: 4 2925 : 3d a9 20      and masks_right,x
226f: 3 2929 : 85 0f         sta tmp3
2271: 4 2932 : bd a8 20      lda maskd_left,x
2274: 4 2936 : 1d a1 20      ora maskd_right,x
2277: 2 2940 : a0 00         ldy #0
2279: 5 2942 : 31 11         and (scr),y
227b: 3 2947 : 85 0d         sta tmp
227d: 3 2950 : a5 0e         lda tmp2
227f: 3 2953 : 25 0f         and tmp3
2281: 3 2956 : 05 0d         ora tmp
2283: 5 2959 : 91 11         sta (scr),y
2285: 4 2964 : 4c 58 22      jmp -done
2285: 4 2968 :           frame:
2288: 6 2972 : 20 82 21      jsr vline
228b: 6 2978 : 20 e4 21      jsr hline
228e: 3 2984 : a5 19         lda xpos
2290: 3 2987 : 48            pha
2291: 2 2990 : 18            clc
2292: 3 2992 : 65 1d         adc width
2294: 3 2995 : 85 19         sta xpos
2296: 6 2998 : 20 82 21      jsr vline
2299: 4 3004 : 68            pla
229a: 3 3008 : 85 19         sta xpos
229c: 3 3011 : a5 1a         lda ypos
229e: 3 3014 : 48            pha
229f: 2 3017 : 18            clc
22a0: 3 3019 : 65 1e         adc height
22a2: 3 3022 : 85 1a         sta ypos
22a4: 6 3025 : 20 e4 21      jsr hline
22a7: 4 3031 : 68            pla
22a8: 3 3035 : 85 1a         sta ypos
22aa: 6 3038 : 60            rts
22aa: 6 3044 :           box:lda height
22ab: 3 3050 : a5 1e     box:lda height
22ad: 3 3053 : 48            pha
22ae: 3 3056 : a5 1a         lda ypos
22b0: 3 3059 : 48            pha
22b0: 3 3062 :           l:  jsr hline
22b1: 6 3065 : 20 e4 21  l:  jsr hline
22b4: 5 3071 : e6 1a         inc ypos
22b6: 5 3076 : c6 1e         dec height
22b8: 2 3081 : d0 f7         bne -l
22ba: 4 3083 : 68            pla
22bb: 3 3087 : 85 1a         sta ypos
22bd: 4 3090 : 68            pla
22be: 3 3094 : 85 1e         sta height
22c0: 6 3097 : 60            rts
22c0: 6 3103 :           buf_clipped_char:
22c8: 6 3109 : 00 00 00 00 00 00 00 00    fill 8
22c8: 6 3115 :           blit_char:
22c9: 3 3121 : a5 19         lda xpos
22cb: 2 3124 : 29 07         and #7
22cd: 3 3126 : 85 0e         sta tmp2
22cf: 2 3129 : aa            tax
22d0: 4 3131 : bd 0d 24      lda tab_neg,x
22d3: 3 3135 : 85 0f         sta tmp3
22d5: 2 3138 : a0 07         ldy #7
22d5: 2 3140 :           l:  lda (s),y
22d7: 5 3142 : b1 00     l:  lda (s),y
22d9: 3 3147 : a6 0e         ldx tmp2
22db: 2 3150 : f0 04         beq +i
22db: 2 3152 :           m:  lsr
22dd: 2 3154 : 4a        m:  lsr
22de: 2 3156 : ca            dex
22df: 2 3158 : d0 fc         bne -m
22df: 2 3160 :           i:  ora (scr),y
22e1: 5 3162 : 11 11     i:  ora (scr),y
22e3: 5 3167 : 91 11         sta (scr),y
22e5: 2 3172 : 88            dey
22e6: 2 3174 : 10 ef         bpl -l
22e8: 6 3176 : 20 d7 21      jsr inc_xcpos
22eb: 2 3182 : a0 07         ldy #7
22eb: 2 3184 :           l:  lda (s),y
22ed: 5 3186 : b1 00     l:  lda (s),y
22ef: 3 3191 : a6 0f         ldx tmp3
22ef: 3 3194 :           m:  asl
22f1: 2 3197 : 0a        m:  asl
22f2: 2 3199 : ca            dex
22f3: 2 3201 : d0 fc         bne -m
22f5: 5 3203 : 11 11         ora (scr),y
22f7: 5 3208 : 91 11         sta (scr),y
22f9: 2 3213 : 88            dey
22fa: 2 3215 : 10 f1         bpl -l
22fc: 6 3217 : 60            rts
22fc: 6 3223 :           clip_char:
22fd: 2 3229 : a0 07         ldy #7
22fd: 2 3231 :           l:  lda (s),y
22ff: 5 3233 : b1 00     l:  lda (s),y
2301: 4 3238 : 99 c1 22      sta buf_clipped_char,y
2304: 2 3242 : 88            dey
2305: 2 3244 : 10 f8         bpl -l
2307: 2 3246 : a9 c1         lda #<buf_clipped_char
2309: 3 3248 : 85 00         sta s
230b: 2 3251 : a9 22         lda #>buf_clipped_char
230d: 3 3253 : 85 01         sta @(++ s)
230f: 3 3256 : a5 16         lda ryt
2311: 2 3259 : 38            sec
2312: 3 3261 : e5 1a         sbc ypos
2314: 2 3264 : 90 0a         bcc +n
2316: 2 3266 : a8            tay
2317: 2 3268 : 88            dey
2318: 2 3270 : a9 00         lda #0
2318: 2 3272 :           l:  sta buf_clipped_char,y
231a: 4 3274 : 99 c1 22  l:  sta buf_clipped_char,y
231d: 2 3278 : 88            dey
231e: 2 3280 : 10 fa         bpl -l
231e: 2 3282 :           n:
2320: 3 3284 : a5 1c         lda ypos2
2322: 3 3287 : c5 18         cmp ryb
2324: 2 3290 : 90 10         bcc +n
2326: 3 3292 : a5 18         lda ryb
2328: 2 3295 : 38            sec
2329: 3 3297 : e5 1a         sbc ypos
232b: 2 3300 : a8            tay
232c: 2 3302 : a9 00         lda #0
232c: 2 3304 :           l:  sta buf_clipped_char,y
232e: 4 3306 : 99 c1 22  l:  sta buf_clipped_char,y
2331: 2 3310 : c8            iny
2332: 2 3312 : c0 08         cpy #8
2334: 2 3314 : d0 f8         bne -l
2334: 2 3316 :           n:
2336: 2 3318 : a9 ff         lda #$ff
2338: 3 3320 : 85 0e         sta tmp2
233a: 3 3323 : a5 15         lda rxl
233c: 2 3326 : 38            sec
233d: 3 3328 : e5 19         sbc xpos
233f: 2 3331 : 90 06         bcc +n
2341: 2 3333 : a8            tay
2342: 4 3335 : b9 a0 20      lda masks_left,y
2345: 3 3339 : 85 0e         sta tmp2
2345: 3 3342 :           n:
2347: 3 3345 : a5 1b         lda xpos2
2349: 2 3348 : 38            sec
234a: 3 3350 : e5 17         sbc rxr
234c: 2 3353 : 90 08         bcc +n
234e: 2 3355 : a8            tay
234f: 4 3357 : b9 a9 20      lda masks_right,y
2352: 3 3361 : 25 0e         and tmp2
2354: 3 3364 : 85 0e         sta tmp2
2354: 3 3367 :           n:
2356: 2 3370 : a0 07         ldy #7
2356: 2 3372 :           l:  lda tmp2
2358: 3 3374 : a5 0e     l:  lda tmp2
235a: 4 3377 : 39 c1 22      and buf_clipped_char,y
235d: 4 3381 : 99 c1 22      sta buf_clipped_char,y
2360: 2 3385 : 88            dey
2361: 2 3387 : 10 f5         bpl -l
2363: 6 3389 : 60            rts
2363: 6 3395 :           putchar:
2364: 2 3401 : c9 5b         cmp #@(++ (char-code #\Z)))
2366: 2 3403 : 90 03         bcc +n
2368: 2 3405 : 38            sec
2369: 2 3407 : e9 60         sbc #@(-- (char-code #\a))
2369: 2 3409 :           n:
236b: 2 3411 : 0a            asl
236c: 2 3413 : 69 00         adc #0
236e: 2 3415 : 0a            asl
236f: 2 3417 : 69 00         adc #0
2371: 2 3419 : 0a            asl
2372: 2 3421 : 69 00         adc #0
2374: 2 3423 : a8            tay
2375: 2 3425 : 29 f8         and #%11111000
2377: 3 3427 : 85 00         sta s
2379: 2 3430 : 98            tya
237a: 2 3432 : 29 07         and #%00000111
237c: 3 3434 : 05 21         ora font
237e: 3 3437 : 85 01         sta @(++ s)
2380: 2 3440 : a0 07         ldy #7
2382: 2 3442 : a9 00         lda #0
2382: 2 3444 :           l:  ora (s),y
2384: 5 3446 : 11 00     l:  ora (s),y
2386: 2 3451 : 88            dey
2387: 2 3453 : 10 fb         bpl -l
2389: 3 3455 : 85 0d         sta tmp
238b: 3 3458 : a6 19         ldx xpos    ; XXX really needed?
238d: 2 3461 : f0 0e         beq +n
238f: 3 3463 : a6 23         ldx do_compress_font_gaps
2391: 2 3466 : f0 0a         beq +n
2391: 2 3468 :           l:  asl
2393: 2 3470 : 0a        l:  asl
2394: 2 3472 : b0 07         bcs +n
2396: 2 3474 : f0 05         beq +n
2398: 5 3476 : c6 19         dec xpos
239a: 4 3481 : 4c 93 23      jmp -l
239a: 4 3485 :           n:
239d: 3 3489 : a5 19         lda xpos
239f: 2 3492 : 18            clc
23a0: 2 3494 : 69 08         adc #8
23a2: 3 3496 : 85 1b         sta xpos2
23a4: 3 3499 : a5 1a         lda ypos
23a6: 2 3502 : 18            clc
23a7: 2 3504 : 69 08         adc #8
23a9: 3 3506 : 85 1c         sta ypos2
23ab: 3 3509 : a5 19         lda xpos
23ad: 3 3512 : c5 17         cmp rxr
23af: 2 3515 : b0 33         bcs +next_char
23b1: 3 3517 : a5 1b         lda xpos2
23b3: 3 3520 : c5 15         cmp rxl
23b5: 2 3523 : 90 2d         bcc +next_char
23b7: 3 3525 : a5 1a         lda ypos
23b9: 3 3528 : c5 18         cmp ryb
23bb: 2 3531 : b0 27         bcs +next_char
23bd: 3 3533 : a5 1c         lda ypos2
23bf: 3 3536 : c5 16         cmp ryt
23c1: 2 3539 : 90 21         bcc +next_char
23c3: 3 3541 : a5 19         lda xpos
23c5: 3 3544 : c5 15         cmp rxl
23c7: 2 3547 : 90 12         bcc +m
23c9: 3 3549 : a5 17         lda rxr
23cb: 3 3552 : c5 1b         cmp xpos2
23cd: 2 3555 : 90 0c         bcc +m
23cf: 3 3557 : a5 1a         lda ypos
23d1: 3 3560 : c5 16         cmp ryt
23d3: 2 3563 : 90 06         bcc +m
23d5: 3 3565 : a5 18         lda ryb
23d7: 3 3568 : c5 1c         cmp ypos2
23d9: 2 3571 : b0 03         bcs +n
23d9: 2 3573 :           m:  jsr clip_char
23db: 6 3575 : 20 fd 22  m:  jsr clip_char
23db: 6 3581 :           n:
23de: 6 3587 : 20 f5 20      jsr calcscr
23e1: 6 3593 : 20 c9 22      jsr blit_char
23e1: 6 3599 :           next_char:
23e4: 3 3605 : a5 19         lda xpos
23e6: 2 3608 : 18            clc
23e7: 2 3610 : 69 08         adc #8
23e9: 3 3612 : 85 19         sta xpos
23eb: 3 3615 : a6 23         ldx do_compress_font_gaps
23ed: 2 3618 : f0 1d         beq +j
23ef: 3 3620 : a5 0d         lda tmp
23f1: 2 3623 : f0 0f         beq +n      ; Add default gap for spaces…
23f3: 3 3625 : a5 0d         lda tmp
23f3: 3 3628 :           l:  lsr
23f5: 2 3631 : 4a        l:  lsr
23f6: 2 3633 : b0 07         bcs +done
23f8: 2 3635 : f0 05         beq +done
23fa: 5 3637 : c6 19         dec xpos
23fc: 4 3642 : 4c f5 23      jmp -l
23fc: 4 3646 :           done:
23ff: 5 3650 : e6 19         inc xpos
2401: 6 3655 : 60            rts
2401: 6 3661 :           n:  lda xpos
2402: 3 3667 : a5 19     n:  lda xpos
2404: 2 3670 : 38            sec
2405: 2 3672 : e9 08         sbc #8
2407: 2 3674 : 18            clc
2408: 3 3676 : 65 22         adc font_space_size
240a: 3 3679 : 85 19         sta xpos
240a: 3 3682 :           j:  rts
240c: 6 3685 : 60        j:  rts
240c: 6 3691 :           tab_neg:    0 7 6 5 4 3 2 1
240d: 6 3697 : 00        tab_neg:    0 7 6 5 4 3 2 1
240e: 6 3703 : 07        tab_neg:    0 7 6 5 4 3 2 1
240f: 6 3709 : 06        tab_neg:    0 7 6 5 4 3 2 1
2410: 6 3715 : 05        tab_neg:    0 7 6 5 4 3 2 1
2411: 6 3721 : 04        tab_neg:    0 7 6 5 4 3 2 1
2412: 6 3727 : 03        tab_neg:    0 7 6 5 4 3 2 1
2413: 6 3733 : 02        tab_neg:    0 7 6 5 4 3 2 1
2414: 6 3739 : 01        tab_neg:    0 7 6 5 4 3 2 1
2414: 6 3745 :           putstring:
2415: 2 3751 : a0 00         ldy #0
2417: 5 3753 : b1 06         lda (p),y
2419: 2 3758 : f0 0c         beq +done
241b: 6 3760 : 20 64 23      jsr putchar
241e: 5 3766 : e6 06         inc p
2420: 2 3771 : d0 f3         bne putstring
2422: 5 3773 : e6 07         inc @(++ p)
2424: 4 3778 : 4c 15 24      jmp putstring
2424: 4 3782 :           done:
2427: 5 3786 : e6 06         inc p
2429: 2 3791 : d0 02         bne +n
242b: 5 3793 : e6 07         inc @(++ p)
242b: 5 3798 :           n:  rts
242d: 6 3803 : 60        n:  rts
242d: 6 3809 :           gfx_init:
242e: 2 3815 : a9 00         lda #0
2430: 2 3817 : aa            tax
2430: 2 3819 :           l:  sta colors,x
2431: 4 3821 : 9d 00 94  l:  sta colors,x
2434: 4 3825 : 9d 00 95      sta @(+ 256 colors),x
2437: 2 3829 : ca            dex
2438: 2 3831 : d0 f7         bne -l
243a: 2 3833 : a9 00         lda #<screen
243c: 3 3835 : 85 02         sta d
243e: 2 3838 : a9 10         lda #>screen
2440: 3 3840 : 85 03         sta @(++ d)
2442: 2 3843 : a2 0c         ldx #screen_rows
2444: 2 3845 : a9 f4         lda #@(+ 16 (* (-- screen_columns) screen_rows))
2444: 2 3847 :           m:  pha
2446: 3 3849 : 48        m:  pha
2447: 2 3852 : a0 13         ldy #@(-- screen_columns)
2447: 2 3854 :           l:  sta (d),y
2449: 5 3856 : 91 02     l:  sta (d),y
244b: 2 3861 : 38            sec
244c: 2 3863 : e9 0c         sbc #screen_rows
244e: 2 3865 : 88            dey
244f: 2 3867 : 10 f8         bpl -l
2451: 3 3869 : a5 02         lda d
2453: 2 3872 : 18            clc
2454: 2 3874 : 69 14         adc #screen_columns
2456: 3 3876 : 85 02         sta d
2458: 2 3879 : 90 02         bcc +n
245a: 5 3881 : e6 03         inc @(++ d)
245a: 5 3886 :           n:
245c: 4 3891 : 68            pla
245d: 2 3895 : 18            clc
245e: 2 3897 : 69 01         adc #1
2460: 2 3899 : ca            dex
2461: 2 3901 : d0 e3         bne -m
2463: 4 3903 : ae e4 ed      ldx $ede4
2466: 2 3907 : e8            inx
2467: 2 3909 : e8            inx
2468: 4 3911 : 8e 00 90      stx $9000
246b: 4 3915 : ae e5 ed      ldx $ede5
246e: 2 3919 : ca            dex
246f: 4 3921 : 8e 01 90      stx $9001
2472: 2 3925 : a9 14         lda #@screen_columns
2474: 4 3927 : 8d 02 90      sta $9002
2477: 2 3931 : a9 19         lda #@(+ (* 2 screen_rows) 1)
2479: 4 3933 : 8d 03 90      sta $9003
247c: 2 3937 : a9 cc         lda #$cc    ; screen=$1e00, chars=$1000
247e: 4 3939 : 8d 05 90      sta $9005
2481: 2 3943 : a9 1b         lda #@(+ (* white 16) reverse cyan)
2483: 4 3945 : 8d 0f 90      sta $900f
2486: 6 3949 : 20 35 21      jsr reset_region
2489: 7 3955 : 00            brk
248a: 7 3962 : 09            c_setzb font $88
248b: 7 3969 : 21            c_setzb font $88
248c: 7 3976 : 88            c_setzb font $88
248d: 7 3983 : 09            c_setzb do_compress_font_gaps 1
248e: 7 3990 : 23            c_setzb do_compress_font_gaps 1
248f: 7 3997 : 01            c_setzb do_compress_font_gaps 1
2490: 7 4004 : 09            c_setzb font_compression 2
2491: 7 4011 : 14            c_setzb font_compression 2
2492: 7 4018 : 02            c_setzb font_compression 2
2493: 7 4025 : 09            c_setzb font_space_size 3
2494: 7 4032 : 22            c_setzb font_space_size 3
2495: 7 4039 : 03            c_setzb font_space_size 3
2496: 7 4046 : 00            0
2497: 6 4053 : 60            rts
2497: 6 4059 :           num_args:   0
2498: 6 4065 : 00        num_args:   0
2498: 6 4071 :           inc_sp:
2499: 5 4077 : e6 0a         inc sp
249b: 2 4082 : d0 02         bne +n
249d: 5 4084 : e6 0b         inc @(++ sp)
249d: 5 4089 :           n:  rts
249f: 6 4094 : 60        n:  rts
249f: 6 4100 :           inc_sa:
24a0: 5 4106 : e6 08         inc sa
24a2: 2 4111 : d0 02         bne +n
24a4: 5 4113 : e6 09         inc @(++ sa)
24a4: 5 4118 :           n:  rts
24a6: 6 4123 : 60        n:  rts
24a6: 6 4129 :           exec_script:
24a7: 4 4135 : 68            pla ; Y
24a8: 4 4139 : 68            pla ; X
24a9: 3 4143 : 85 0c         sta srx
24ab: 4 4146 : 68            pla ; A
24ac: 4 4150 : 28            plp ; flags
24ad: 4 4154 : 68            pla
24ae: 3 4158 : 85 0a         sta sp
24b0: 4 4161 : 68            pla
24b1: 3 4165 : 85 0b         sta @(++ sp)
24b3: 3 4168 : a5 0a         lda sp
24b5: 2 4171 : 38            sec
24b6: 2 4173 : e9 01         sbc #1
24b8: 3 4175 : 85 0a         sta sp
24ba: 2 4178 : b0 02         bcs +n
24bc: 5 4180 : c6 0b         dec @(++ sp)
24bc: 5 4185 :           n:
24bc: 5 4190 :           next_bytecode:
24be: 2 4195 : a0 00         ldy #0
24c0: 5 4197 : b1 0a         lda (sp),y
24c2: 2 4202 : f0 38         beq +done   ; Return to native code…
24c4: 2 4204 : aa            tax
24c5: 2 4206 : ca            dex
24c6: 4 4208 : bd 18 20      lda syscall_vectors_l,x
24c9: 4 4212 : 8d f7 24      sta @(+ 1 +mod_call)
24cc: 4 4216 : bd 2b 20      lda syscall_vectors_h,x
24cf: 4 4220 : 8d f8 24      sta @(+ 2 +mod_call)
24d2: 4 4224 : bd 3e 20      lda syscall_args_l,x
24d5: 3 4228 : 85 08         sta sa
24d7: 4 4231 : bd 51 20      lda syscall_args_h,x
24da: 3 4235 : 85 09         sta @(++ sa)
24dc: 5 4238 : b1 08         lda (sa),y
24de: 4 4243 : 8d 98 24      sta num_args
24de: 4 4247 :           next_arg:
24e1: 6 4251 : 20 99 24      jsr inc_sp
24e4: 6 4257 : ce 98 24      dec num_args
24e7: 2 4263 : 30 0d         bmi script_call
24e9: 6 4265 : 20 a0 24      jsr inc_sa
24ec: 5 4271 : b1 08         lda (sa),y      ; Get zero page address from argument info.
24ee: 2 4276 : aa            tax
24ef: 5 4278 : b1 0a         lda (sp),y      ; Copy in argument value.
24f1: 4 4283 : 95 00         sta 0,x
24f3: 4 4287 : 4c e1 24      jmp next_arg
24f3: 4 4291 :           script_call:
24f3: 4 4295 :           mod_call:
24f6: 6 4299 : 20 ff ff      jsr $ffff
24f9: 4 4305 : 4c be 24      jmp next_bytecode
24f9: 4 4309 :           done:
24fc: 3 4313 : a5 0b         lda @(++ sp)
24fe: 3 4316 : 48            pha
24ff: 3 4319 : a5 0a         lda sp
2501: 3 4322 : 48            pha
2502: 3 4325 : a6 0c         ldx srx
2504: 6 4328 : 60            rts
2504: 6 4334 :           apply:
2505: 5 4340 : b1 0a         lda (sp),y
2507: 2 4345 : aa            tax
2508: 2 4347 : ca            dex
2509: 6 4349 : 20 99 24      jsr inc_sp
250c: 4 4355 : bd 18 20      lda syscall_vectors_l,x
250f: 4 4359 : 8d 19 25      sta @(+ 1 +mod_call)
2512: 4 4363 : bd 2b 20      lda syscall_vectors_h,x
2515: 4 4367 : 8d 1a 25      sta @(+ 2 +mod_call)
2515: 4 4371 :           mod_call:
2518: 4 4375 : 4c ff ff      jmp $ffff
2518: 4 4379 :           addx:
251b: 3 4383 : a5 0d         lda tmp
251d: 2 4386 : 18            clc
251e: 3 4388 : 65 19         adc xpos
2520: 3 4391 : 85 19         sta xpos
2522: 6 4394 : 60            rts
2522: 6 4400 :           addy:
2523: 3 4406 : a5 0d         lda tmp
2525: 2 4409 : 18            clc
2526: 3 4411 : 65 1a         adc ypos
2528: 3 4414 : 85 1a         sta ypos
252a: 6 4417 : 60            rts
252a: 6 4423 :           setzb:
252b: 3 4429 : a6 0d         ldx tmp
252d: 3 4432 : a5 0e         lda tmp2
252f: 4 4435 : 95 00         sta 0,x
2531: 6 4439 : 60            rts
2531: 6 4445 :           setzw:
2532: 3 4451 : a6 0d         ldx tmp
2534: 3 4454 : a5 0e         lda tmp2
2536: 4 4457 : 95 00         sta 0,x
2538: 3 4461 : a5 0f         lda tmp3
253a: 4 4464 : 95 01         sta 1,x
253c: 6 4468 : 60            rts
253c: 6 4474 :           addzb:
253d: 3 4480 : a6 0e         ldx tmp2
253f: 3 4483 : a4 0f         ldy tmp3
2541: 4 4486 : b5 00         lda 0,x
2543: 2 4490 : 18            clc
2544: 4 4492 : 79 00 00      adc 0,y
2547: 3 4496 : a6 0d         ldx tmp
2549: 4 4499 : 95 00         sta 0,x
254b: 6 4503 : 60            rts
254b: 6 4509 :           sbczb:
254c: 3 4515 : a6 0e         ldx tmp2
254e: 3 4518 : a4 0f         ldy tmp3
2550: 4 4521 : b5 00         lda 0,x
2552: 2 4525 : 38            sec
2553: 4 4527 : f9 00 00      sbc 0,y
2556: 3 4531 : a6 0d         ldx tmp
2558: 4 4534 : 95 00         sta 0,x
255a: 6 4538 : 60            rts
255a: 6 4544 :           sbczbi:
255b: 3 4550 : a6 0d         ldx tmp
255d: 4 4553 : b5 00         lda 0,x
255f: 2 4557 : 38            sec
2560: 3 4559 : e5 0e         sbc tmp2
2562: 4 4562 : 95 00         sta 0,x
2564: 6 4566 : 60            rts
2564: 6 4572 :           setpattern:
2565: 6 4578 : 60            rts
2565: 6 4584 :           setzs:
2566: 3 4590 : 84 03         sty @(++ d)
2566: 3 4593 :           l:  lda (sp),y
2568: 5 4596 : b1 0a     l:  lda (sp),y
256a: 5 4601 : 91 02         sta (d),y
256c: 6 4606 : 20 99 24      jsr inc_sp
256f: 5 4612 : e6 02         inc d
2571: 2 4617 : d0 02         bne +n
2573: 5 4619 : e6 03         inc @(++ d)
2573: 5 4624 :           n:  dec tmp
2575: 5 4629 : c6 0d     n:  dec tmp
2577: 2 4634 : d0 ef         bne -l
2579: 6 4636 : 60            rts
2579: 6 4642 :           pushz:
257a: 4 4648 : 68            pla
257b: 4 4652 : 68            pla
257c: 3 4656 : a6 0d         ldx tmp
257e: 3 4659 : a4 0e         ldy tmp2
257e: 3 4662 :           l:  lda 0,x
2580: 4 4665 : b5 00     l:  lda 0,x
2582: 2 4669 : e8            inx
2583: 3 4671 : 48            pha
2584: 2 4674 : 88            dey
2585: 2 4676 : d0 f9         bne -l
2587: 4 4678 : 4c be 24      jmp next_bytecode
2587: 4 4682 :           popz:
258a: 4 4686 : 68            pla
258b: 4 4690 : 68            pla
258c: 3 4694 : a4 0e         ldy tmp2
258e: 2 4697 : 98            tya
258f: 2 4699 : 18            clc
2590: 3 4701 : 65 0d         adc tmp
2592: 2 4704 : aa            tax
2592: 2 4706 :           l:  pla
2593: 4 4708 : 68        l:  pla
2594: 2 4712 : ca            dex
2595: 4 4714 : 95 00         sta 0,x
2597: 2 4718 : 88            dey
2598: 2 4720 : d0 f9         bne -l
259a: 4 4722 : 4c be 24      jmp next_bytecode
259a: 4 4726 :           window:
259d: 7 4730 : 00            brk
259e: 7 4737 : 02            c_setpattern <pat_empty >pat_empty
259f: 7 4744 : b1            c_setpattern <pat_empty >pat_empty
25a0: 7 4751 : 20            c_setpattern <pat_empty >pat_empty
25a1: 7 4758 : 13            c_apply c_box
25a2: 7 4765 : 06            c_apply c_box
25a3: 7 4772 : 02            c_setpattern <pat_solid >pat_solid
25a4: 7 4779 : b9            c_setpattern <pat_solid >pat_solid
25a5: 7 4786 : 20            c_setpattern <pat_solid >pat_solid
25a6: 7 4793 : 13            c_apply c_frame
25a7: 7 4800 : 05            c_apply c_frame
25a8: 7 4807 : 10            c_addy 10
25a9: 7 4814 : 0a            c_addy 10
25aa: 7 4821 : 13            c_apply c_hline
25ab: 7 4828 : 04            c_apply c_hline
25ac: 7 4835 : 10            c_addy @(- 256 10)
25ad: 7 4842 : f6            c_addy @(- 256 10)
25ae: 7 4849 : 00            0
25af: 7 4856 : 00            brk
25b0: 7 4863 : 11            c_pushz xpos context_size
25b1: 7 4870 : 19            c_pushz xpos context_size
25b2: 7 4877 : 11            c_pushz xpos context_size
25b3: 7 4884 : 0c            c_addzb tmp4 xpos width
25b4: 7 4891 : 10            c_addzb tmp4 xpos width
25b5: 7 4898 : 19            c_addzb tmp4 xpos width
25b6: 7 4905 : 1d            c_addzb tmp4 xpos width
25b7: 7 4912 : 00            0
25b8: 3 4919 : a5 10         lda tmp4
25ba: 3 4922 : 48            pha
25bb: 7 4925 : 00            brk
25bc: 7 4932 : 0f            c_addx 2
25bd: 7 4939 : 02            c_addx 2
25be: 7 4946 : 10            c_addy 2
25bf: 7 4953 : 02            c_addy 2
25c0: 7 4960 : 0a            c_setzw p <txt_clock >txt_clock
25c1: 7 4967 : 06            c_setzw p <txt_clock >txt_clock
25c2: 7 4974 : f7            c_setzw p <txt_clock >txt_clock
25c3: 7 4981 : 25            c_setzw p <txt_clock >txt_clock
25c4: 7 4988 : 13            c_apply c_putstring
25c5: 7 4995 : 07            c_apply c_putstring
25c6: 7 5002 : 00            0
25c7: 4 5009 : 68            pla
25c8: 3 5013 : 85 10         sta tmp4
25ca: 7 5016 : 00            brk
25cb: 7 5023 : 0d            c_sbczb width tmp4 xpos
25cc: 7 5030 : 1d            c_sbczb width tmp4 xpos
25cd: 7 5037 : 10            c_sbczb width tmp4 xpos
25ce: 7 5044 : 19            c_sbczb width tmp4 xpos
25cf: 7 5051 : 0e            c_sbczbi width 2
25d0: 7 5058 : 1d            c_sbczbi width 2
25d1: 7 5065 : 02            c_sbczbi width 2
25d2: 7 5072 : 10            c_addy 1
25d3: 7 5079 : 01            c_addy 1
25d4: 7 5086 : 13            c_apply c_hline
25d5: 7 5093 : 04            c_apply c_hline
25d6: 7 5100 : 00            0
25d7: 2 5107 : a2 02         ldx #2
25d7: 2 5109 :           l:  brk
25d9: 7 5111 : 00        l:  brk
25da: 7 5118 : 10            c_addy 2
25db: 7 5125 : 02            c_addy 2
25dc: 7 5132 : 13            c_apply c_hline
25dd: 7 5139 : 04            c_apply c_hline
25de: 7 5146 : 00            0
25df: 2 5153 : ca            dex
25e0: 2 5155 : d0 f7         bne -l
25e2: 7 5157 : 00            brk
25e3: 7 5164 : 12            c_popz xpos context_size
25e4: 7 5171 : 19            c_popz xpos context_size
25e5: 7 5178 : 11            c_popz xpos context_size
25e6: 7 5185 : 0e            c_sbczbi width 2
25e7: 7 5192 : 1d            c_sbczbi width 2
25e8: 7 5199 : 02            c_sbczbi width 2
25e9: 7 5206 : 0e            c_sbczbi height 11
25ea: 7 5213 : 1e            c_sbczbi height 11
25eb: 7 5220 : 0b            c_sbczbi height 11
25ec: 7 5227 : 10            c_addy 11
25ed: 7 5234 : 0b            c_addy 11
25ee: 7 5241 : 0f            c_addx 1
25ef: 7 5248 : 01            c_addx 1
25f0: 7 5255 : 02            c_setpattern <pat_woven >pat_woven
25f1: 7 5262 : d3            c_setpattern <pat_woven >pat_woven
25f2: 7 5269 : 20            c_setpattern <pat_woven >pat_woven
25f3: 7 5276 : 13            c_apply c_box
25f4: 7 5283 : 06            c_apply c_box
25f5: 7 5290 : 00            0
25f6: 6 5297 : 60            rts
25f6: 6 5303 :           txt_clock:
25fe: 6 5309 : 75 6e 74 69 74 6c 65 64    "untitled" 0
25ff: 6 5315 : 00            "untitled" 0
25ff: 6 5321 :           boot:
2600: 2 5327 : a9 a7         lda #<exec_script
2602: 4 5329 : 8d 16 03      sta $316
2605: 2 5333 : a9 24         lda #>exec_script
2607: 4 5335 : 8d 17 03      sta $317
260a: 7 5339 : 00            brk
260b: 7 5346 : 0a            c_setzw s $00 $88
260c: 7 5353 : 00            c_setzw s $00 $88
260d: 7 5360 : 00            c_setzw s $00 $88
260e: 7 5367 : 88            c_setzw s $00 $88
260f: 7 5374 : 0a            c_setzw d $00 $30
2610: 7 5381 : 02            c_setzw d $00 $30
2611: 7 5388 : 00            c_setzw d $00 $30
2612: 7 5395 : 30            c_setzw d $00 $30
2613: 7 5402 : 09            c_setzb font_compression 2
2614: 7 5409 : 14            c_setzb font_compression 2
2615: 7 5416 : 02            c_setzb font_compression 2
2616: 7 5423 : 00            0
2617: 6 5430 : 20 2b 27      jsr compress_font
261a: 6 5436 : 20 2e 24      jsr gfx_init
261a: 6 5442 :           redraw:
261d: 7 5448 : 00            brk
261e: 7 5455 : 09            c_setzb font $88
261f: 7 5462 : 21            c_setzb font $88
2620: 7 5469 : 88            c_setzb font $88
2621: 7 5476 : 02            c_setpattern <pat_background >pat_background
2622: 7 5483 : c1            c_setpattern <pat_background >pat_background
2623: 7 5490 : 20            c_setpattern <pat_background >pat_background
2624: 7 5497 : 06            c_box 0 0 @(-- screen_width) screen_height
2625: 7 5504 : 00            c_box 0 0 @(-- screen_width) screen_height
2626: 7 5511 : 00            c_box 0 0 @(-- screen_width) screen_height
2627: 7 5518 : 9f            c_box 0 0 @(-- screen_width) screen_height
2628: 7 5525 : c0            c_box 0 0 @(-- screen_width) screen_height
2629: 7 5532 : 02            c_setpattern <pat_empty >pat_empty
262a: 7 5539 : b1            c_setpattern <pat_empty >pat_empty
262b: 7 5546 : 20            c_setpattern <pat_empty >pat_empty
262c: 7 5553 : 06            c_box 8 4 @(- screen_width 16) 119
262d: 7 5560 : 08            c_box 8 4 @(- screen_width 16) 119
262e: 7 5567 : 04            c_box 8 4 @(- screen_width 16) 119
262f: 7 5574 : 90            c_box 8 4 @(- screen_width 16) 119
2630: 7 5581 : 77            c_box 8 4 @(- screen_width 16) 119
2631: 7 5588 : 02            c_setpattern <pat_solid >pat_solid
2632: 7 5595 : b9            c_setpattern <pat_solid >pat_solid
2633: 7 5602 : 20            c_setpattern <pat_solid >pat_solid
2634: 7 5609 : 13            c_apply c_frame
2635: 7 5616 : 05            c_apply c_frame
2636: 7 5623 : 0f            c_addx 2
2637: 7 5630 : 02            c_addx 2
2638: 7 5637 : 10            c_addy 3
2639: 7 5644 : 03            c_addy 3
263a: 7 5651 : 0a            c_setzw p <txt_welcome >txt_welcome
263b: 7 5658 : 06            c_setzw p <txt_welcome >txt_welcome
263c: 7 5665 : 76            c_setzw p <txt_welcome >txt_welcome
263d: 7 5672 : 26            c_setzw p <txt_welcome >txt_welcome
263e: 7 5679 : 00            0
263e: 7 5686 :           l:  ldy #0
263f: 2 5693 : a0 00     l:  ldy #0
2641: 5 5695 : b1 06         lda (p),y
2643: 2 5700 : f0 18         beq +done
2645: 3 5702 : a5 19         lda xpos
2647: 3 5705 : 48            pha
2648: 3 5708 : a5 1a         lda ypos
264a: 3 5711 : 48            pha
264b: 6 5714 : 20 15 24      jsr putstring
264e: 2 5720 : a9 30         lda #$30
2650: 3 5722 : 85 21         sta font
2652: 4 5725 : 68            pla
2653: 2 5729 : 69 0a         adc #10
2655: 3 5731 : 85 1a         sta ypos
2657: 4 5734 : 68            pla
2658: 3 5738 : 85 19         sta xpos
265a: 4 5741 : 4c 3f 26      jmp -l
265a: 4 5745 :           done:
265d: 7 5749 : 00            brk
265e: 7 5756 : 09            c_setzb xpos 80
265f: 7 5763 : 19            c_setzb xpos 80
2660: 7 5770 : 50            c_setzb xpos 80
2661: 7 5777 : 09            c_setzb ypos 120
2662: 7 5784 : 1a            c_setzb ypos 120
2663: 7 5791 : 78            c_setzb ypos 120
2664: 7 5798 : 09            c_setzb width 60
2665: 7 5805 : 1d            c_setzb width 60
2666: 7 5812 : 3c            c_setzb width 60
2667: 7 5819 : 09            c_setzb height 50
2668: 7 5826 : 1e            c_setzb height 50
2669: 7 5833 : 32            c_setzb height 50
266a: 7 5840 : 00            0
266b: 6 5847 : 20 9d 25      jsr window
266b: 6 5853 :           l:  jsr $ffe4
266e: 6 5859 : 20 e4 ff  l:  jsr $ffe4
2671: 2 5865 : f0 fb         beq -l
2673: 4 5867 : 4c 1d 26      jmp redraw
2673: 4 5871 :           txt_welcome:
2687: 4 5875 : 43 6f 6d 6d 6f 64 6f 72 65 20 56 49 43 2d 32 30 20 47 55 49    "Commodore VIC-20 GUI" 0
2688: 4 5879 : 00            "Commodore VIC-20 GUI" 0
2689: 4 5883 : 20            " " 0
268a: 4 5887 : 00            " " 0
268b: 4 5891 : 20            " " 0
268c: 4 5895 : 00            " " 0
26a3: 4 5899 : 47 72 61 70 68 69 63 73 20 70 72 69 6d 69 74 69 76 65 73 20 61 6e 64    "Graphics primitives and" 0
26a4: 4 5903 : 00            "Graphics primitives and" 0
26c1: 4 5907 : 76 61 72 69 61 62 6c 65 20 77 69 64 74 68 20 66 6f 6e 74 20 72 65 6e 64 65 72 69 6e 67    "variable width font rendering" 0
26c2: 4 5911 : 00            "variable width font rendering" 0
26d2: 4 5915 : 69 6e 20 6c 65 73 73 20 74 68 61 6e 20 32 4b 2e    "in less than 2K." 0
26d3: 4 5919 : 00            "in less than 2K." 0
26d4: 4 5923 : 20            " " 0
26d5: 4 5927 : 00            " " 0
26f0: 4 5931 : 54 68 69 73 20 66 6f 6e 74 20 69 73 20 67 65 6e 65 72 61 74 65 64 20 66 72 6f 6d    "This font is generated from" 0
26f1: 4 5935 : 00            "This font is generated from" 0
270c: 4 5939 : 74 68 65 20 73 79 73 74 65 6d 20 66 6f 6e 74 20 61 74 20 73 74 61 72 74 75 70 2e    "the system font at startup." 0
270d: 4 5943 : 00            "the system font at startup." 0
270e: 4 5947 : 20            " " 0
270f: 4 5951 : 00            " " 0
2726: 4 5955 : 41 6c 6c 20 64 72 61 77 69 6e 67 20 69 73 20 63 6c 69 70 70 65 64 2e    "All drawing is clipped." 0
2727: 4 5959 : 00            "All drawing is clipped." 0
2728: 4 5963 : 00            0
2728: 4 5967 :           compress_font:
272b: 2 5971 : a9 00         lda #0
272d: 3 5973 : 85 0e         sta tmp2
272d: 3 5976 :           next_char:
272f: 2 5979 : a9 80         lda #128
2731: 3 5981 : 85 0d         sta tmp
2733: 2 5984 : a2 00         ldx #0
2733: 2 5986 :           next_bit:
2735: 2 5988 : a0 00         ldy #0
2735: 2 5990 :           next_line:
2737: 5 5992 : b1 00         lda (s),y
2739: 3 5997 : 25 0d         and tmp
273b: 2 6000 : f0 04         beq +n
273d: 2 6002 : 38            sec
273e: 4 6004 : 4c 42 27      jmp +m
273e: 4 6008 :           n:  clc
2741: 2 6012 : 18        n:  clc
2741: 2 6014 :           m:  ror buffer1,x
2742: 7 6016 : 7e c8 27  m:  ror buffer1,x
2745: 2 6023 : c8            iny
2746: 2 6025 : c0 08         cpy #8
2748: 2 6027 : d0 ed         bne -next_line
274a: 2 6029 : e8            inx
274b: 5 6031 : 46 0d         lsr tmp
274d: 2 6036 : d0 e6         bne -next_bit
274f: 2 6038 : a2 07         ldx #7
2751: 2 6040 : a9 00         lda #0
2751: 2 6042 :           l:  sta buffer2,x
2753: 4 6044 : 9d d0 27  l:  sta buffer2,x
2756: 2 6048 : ca            dex
2757: 2 6050 : 10 fa         bpl -l
2759: 4 6052 : ad c8 27      lda buffer1
275c: 4 6056 : 8d d0 27      sta buffer2
275f: 3 6060 : a5 14         lda font_compression
2761: 3 6063 : 85 0d         sta tmp
2763: 2 6066 : a2 01         ldx #1
2765: 2 6068 : a0 01         ldy #1
2765: 2 6070 :           l:  lda buffer1,x
2767: 4 6072 : bd c8 27  l:  lda buffer1,x
276a: 4 6076 : 99 d0 27      sta buffer2,y
276d: 4 6080 : d9 cf 27      cmp @(-- buffer2),y
2770: 2 6084 : f0 04         beq +n
2770: 2 6086 :           j:  iny
2772: 2 6088 : c8        j:  iny
2773: 4 6090 : 4c 7a 27      jmp +m
2773: 4 6094 :           n:  dec tmp
2776: 5 6098 : c6 0d     n:  dec tmp
2778: 2 6103 : 30 f8         bmi -j
2778: 2 6105 :           m:  inx
277a: 2 6107 : e8        m:  inx
277b: 2 6109 : e0 08         cpx #8
277d: 2 6111 : d0 e8         bne -l
277f: 2 6113 : a9 01         lda #1
2781: 3 6115 : 85 0d         sta tmp
2783: 2 6118 : a2 00         ldx #0
2783: 2 6120 :           next_bit:
2785: 2 6122 : a0 00         ldy #0
2785: 2 6124 :           next_line:
2787: 4 6126 : b9 d0 27      lda buffer2,y
278a: 3 6130 : 25 0d         and tmp
278c: 2 6133 : f0 04         beq +n
278e: 2 6135 : 38            sec
278f: 4 6137 : 4c 93 27      jmp +m
278f: 4 6141 :           n:  clc
2792: 2 6145 : 18        n:  clc
2792: 2 6147 :           m:  rol buffer1,x
2793: 7 6149 : 3e c8 27  m:  rol buffer1,x
2796: 2 6156 : c8            iny
2797: 2 6158 : c0 08         cpy #8
2799: 2 6160 : d0 ec         bne -next_line
279b: 2 6162 : e8            inx
279c: 5 6164 : 06 0d         asl tmp
279e: 2 6169 : d0 e5         bne -next_bit
27a0: 2 6171 : a0 07         ldy #7
27a0: 2 6173 :           l:  lda buffer1,y
27a2: 4 6175 : b9 c8 27  l:  lda buffer1,y
27a5: 5 6179 : 91 02         sta (d),y
27a7: 2 6184 : 88            dey
27a8: 2 6186 : 10 f8         bpl -l
27aa: 3 6188 : a5 00         lda s
27ac: 2 6191 : 18            clc
27ad: 2 6193 : 69 08         adc #8
27af: 3 6195 : 85 00         sta s
27b1: 2 6198 : 90 02         bcc +n
27b3: 5 6200 : e6 01         inc @(++ s)
27b3: 5 6205 :           n:
27b5: 3 6210 : a5 02         lda d
27b7: 2 6213 : 18            clc
27b8: 2 6215 : 69 08         adc #8
27ba: 3 6217 : 85 02         sta d
27bc: 2 6220 : 90 02         bcc +n
27be: 5 6222 : e6 03         inc @(++ d)
27be: 5 6227 :           n:
27c0: 5 6232 : c6 0e         dec tmp2
27c2: 2 6237 : f0 03         beq +done
27c4: 4 6239 : 4c 2f 27      jmp next_char
27c4: 4 6243 :           done:
27c7: 6 6247 : 60            rts
27c7: 6 6253 :           buffer1:    fill 8
27cf: 6 6259 : 00 00 00 00 00 00 00 00buffer1:    fill 8
27cf: 6 6265 :           buffer2:    fill 8
27d7: 6 6271 : 00 00 00 00 00 00 00 00buffer2:    fill 8
27d7: 6 6277 :           kernal_end:
